import{d as K,r as n,e as L,n as M,o as p,c as A,f as e,w as o,y as E,u as l,q as m,g as h,t as c,x as y,a3 as N,k as P,F as G,a as H,P as J,K as W,I as O,ak as Q,L as R,al as Y,M as Z}from"./index-DPENBzsb.js";import{_ as $}from"./Dialog.vue_vue_type_style_index_0_lang-ncKgepny.js";import{_ as aa}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CnIlr_-B.js";import{_ as ea}from"./index.vue_vue_type_script_setup_true_lang-CvB_IkZW.js";import{_ as oa}from"./index-CbaPuDB3.js";import{d as ta}from"./formatTime-C7TQtsxQ.js";import{_ as la}from"./bpmn-embedded-BBruoZr8.js";import{g as ra,a as ia}from"./index-B9xqy6_R.js";import{b as pa}from"./formCreate-BQ5MeUYD.js";import"./index-C2tU_CDa.js";import"./XTextButton-CaCskr4h.js";import"./XButton-lfojvuGT.js";import"./consts-Dqfik1EE.js";import"./index-Co9HWb9O.js";import"./utils-CjFsbWby.js";import"./index-D2cLVQ1T.js";import"./index-BCN8BzfC.js";import"./index-BOzeB1Pk.js";import"./el-tree-select-DxCa0FGQ.js";import"./tree-Cts6wVCK.js";import"./index-tb7T-AVj.js";import"./index-BUzABQZW.js";import"./index-Btz8nVwe.js";import"./index-BAEJzc7Z.js";import"./constants-C8tGWvl2.js";import"./index-O66V04DS.js";import"./el-drawer-DSddsvoD.js";import"./DictTag.vue_vue_type_script_lang-pTU0zhE7.js";import"./color-DXkOL5Tu.js";import"./index-IbQXwv2T.js";const na=K({name:"BpmProcessDefinition",__name:"index",setup(ma){const{push:T}=H(),{query:z}=J(),w=n(!0),v=n(0),b=n([]),s=L({pageNo:1,pageSize:10,key:z.key}),C=async()=>{w.value=!0;try{const r=await ra(s);b.value=r.list,v.value=r.total}finally{w.value=!1}},u=n(!1),g=n({rule:[],option:{}}),x=async r=>{r.formType==10?(pa(g,r.formConf,r.formFields),u.value=!0):await T({path:r.formCustomCreatePath})},d=n(!1),_=n("");return M(()=>{C()}),(r,t)=>{const q=oa,i=W,k=O,f=Q,B=R,D=ea,F=aa,X=Y("form-create"),S=$,j=Z;return p(),A(G,null,[e(q,{title:"\u5DE5\u4F5C\u6D41\u624B\u518C",url:"https://doc.iocoder.cn/bpm/"}),e(F,null,{default:o(()=>[E((p(),m(B,{data:l(b)},{default:o(()=>[e(i,{label:"\u5B9A\u4E49\u7F16\u53F7",align:"center",prop:"id",width:"400"}),e(i,{label:"\u6D41\u7A0B\u540D\u79F0",align:"center",prop:"name",width:"200"},{default:o(a=>[e(k,{type:"primary",link:"",onClick:U=>(async I=>{var V;_.value="",d.value=!0,_.value=(V=await ia(I.id))==null?void 0:V.bpmnXml})(a.row)},{default:o(()=>[h("span",null,c(a.row.name),1)]),_:2},1032,["onClick"])]),_:1}),e(i,{label:"\u5B9A\u4E49\u5206\u7C7B",align:"center",prop:"categoryName",width:"100"}),e(i,{label:"\u8868\u5355\u4FE1\u606F",align:"center",prop:"formType",width:"200"},{default:o(a=>[a.row.formType===10?(p(),m(k,{key:0,type:"primary",link:"",onClick:U=>x(a.row)},{default:o(()=>[h("span",null,c(a.row.formName),1)]),_:2},1032,["onClick"])):(p(),m(k,{key:1,type:"primary",link:"",onClick:U=>x(a.row)},{default:o(()=>[h("span",null,c(a.row.formCustomCreatePath),1)]),_:2},1032,["onClick"]))]),_:1}),e(i,{label:"\u6D41\u7A0B\u7248\u672C",align:"center",prop:"processDefinition.version",width:"80"},{default:o(a=>[a.row?(p(),m(f,{key:0},{default:o(()=>[y("v"+c(a.row.version),1)]),_:2},1024)):(p(),m(f,{key:1,type:"warning"},{default:o(()=>t[4]||(t[4]=[y("\u672A\u90E8\u7F72")])),_:1}))]),_:1}),e(i,{label:"\u72B6\u6001",align:"center",prop:"version",width:"80"},{default:o(a=>[a.row.suspensionState===1?(p(),m(f,{key:0,type:"success"},{default:o(()=>t[5]||(t[5]=[y("\u6FC0\u6D3B")])),_:1})):N("",!0),a.row.suspensionState===2?(p(),m(f,{key:1,type:"warning"},{default:o(()=>t[6]||(t[6]=[y("\u6302\u8D77")])),_:1})):N("",!0)]),_:1}),e(i,{label:"\u90E8\u7F72\u65F6\u95F4",align:"center",prop:"deploymentTime",width:"180",formatter:l(ta)},null,8,["formatter"]),e(i,{label:"\u5B9A\u4E49\u63CF\u8FF0",align:"center",prop:"description",width:"300","show-overflow-tooltip":""})]),_:1},8,["data"])),[[j,l(w)]]),e(D,{total:l(v),page:l(s).pageNo,"onUpdate:page":t[0]||(t[0]=a=>l(s).pageNo=a),limit:l(s).pageSize,"onUpdate:limit":t[1]||(t[1]=a=>l(s).pageSize=a),onPagination:C},null,8,["total","page","limit"])]),_:1}),e(S,{title:"\u8868\u5355\u8BE6\u60C5",modelValue:l(u),"onUpdate:modelValue":t[2]||(t[2]=a=>P(u)?u.value=a:null),width:"800"},{default:o(()=>[e(X,{rule:l(g).rule,option:l(g).option},null,8,["rule","option"])]),_:1},8,["modelValue"]),e(S,{title:"\u6D41\u7A0B\u56FE",modelValue:l(d),"onUpdate:modelValue":t[3]||(t[3]=a=>P(d)?d.value=a:null),width:"800"},{default:o(()=>[e(l(la),{style:{height:"700px"},key:"designer",xml:l(_)},null,8,["xml"])]),_:1},8,["modelValue"])],64)}}});export{na as default};
