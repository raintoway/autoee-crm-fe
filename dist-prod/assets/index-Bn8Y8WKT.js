import{d as J,e as L,b as O,r as s,a1 as Q,aw as j,n as K,o as w,c as h,f as e,w as r,u as a,F as V,p as F,O as W,D as X,q as P,x as Y,k as Z,G as $,C as ee,A as ae,B as le,H as re,I as oe,J as te,l as se,m as ue,E as me}from"./index-DPENBzsb.js";import{_ as de}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CnIlr_-B.js";import{E as pe}from"./el-tree-select-DxCa0FGQ.js";import{g as ne}from"./index-BUzABQZW.js";import{g as fe}from"./index-Co9HWb9O.js";import{f as H,c as ye,e as ce,g as ie}from"./formatTime-C7TQtsxQ.js";import{h as M,d as _e}from"./tree-Cts6wVCK.js";import{_ as ve}from"./CustomerConversionStat.vue_vue_type_script_setup_true_lang-Cutsu6OV.js";import{_ as be}from"./CustomerDealCycleByUser.vue_vue_type_script_setup_true_lang-B4LUF6y3.js";import{_ as ke}from"./CustomerDealCycleByArea.vue_vue_type_script_setup_true_lang-ByOW7FEp.js";import{_ as we}from"./CustomerDealCycleByProduct.vue_vue_type_script_setup_true_lang-CBNTLXVk.js";import{_ as De}from"./CustomerFollowUpSummary.vue_vue_type_script_setup_true_lang-Bur1sLNQ.js";import{_ as qe}from"./CustomerFollowUpType.vue_vue_type_script_setup_true_lang-D50u273L.js";import{_ as Ce}from"./CustomerSummary.vue_vue_type_script_setup_true_lang-CK44_kEt.js";import{_ as he}from"./CustomerPoolSummary.vue_vue_type_script_setup_true_lang-D320HebQ.js";import"./DictTag.vue_vue_type_script_lang-pTU0zhE7.js";import"./color-DXkOL5Tu.js";import"./el-skeleton-item-ByHOrDfP.js";import"./Echart.vue_vue_type_script_setup_true_lang-BK9hPyJ9.js";import"./echarts-MlQSgMpK.js";import"./customer-iWdjcsWp.js";const Ve=J({name:"CrmStatisticsCustomer",__name:"index",setup(Ie){const o=L({interval:2,deptId:O().getUser.deptId,userId:void 0,times:[H(ye(new Date(new Date().getTime()-6048e5))),H(ce(new Date(new Date().getTime()-864e5)))]}),I=s(),U=s([]),S=s([]),N=Q(()=>o.deptId?S.value.filter(p=>p.deptId===o.deptId):[]),v=s("customerSummary"),x=s(),g=s(),B=s(),R=s(),z=s(),T=s(),A=s(),E=s(),d=()=>{var p,t,y,m,n,b,c,k,f,D,i,u,_,q,l,C;switch(v.value){case"customerSummary":(t=(p=x.value)==null?void 0:p.loadData)==null||t.call(p);break;case"followUpSummary":(m=(y=g.value)==null?void 0:y.loadData)==null||m.call(y);break;case"followUpType":(b=(n=B.value)==null?void 0:n.loadData)==null||b.call(n);break;case"conversionStat":(k=(c=R.value)==null?void 0:c.loadData)==null||k.call(c);break;case"poolSummary":(D=(f=z.value)==null?void 0:f.loadData)==null||D.call(f);break;case"dealCycleByUser":(u=(i=T.value)==null?void 0:i.loadData)==null||u.call(i);break;case"dealCycleByArea":(q=(_=A.value)==null?void 0:_.loadData)==null||q.call(_);break;case"dealCycleByProduct":(C=(l=E.value)==null?void 0:l.loadData)==null||C.call(l)}};j(v,()=>{d()});const G=()=>{I.value.resetFields(),d()};return K(async()=>{U.value=M(await ne()),S.value=M(await fe())}),(p,t)=>{const y=$,m=ee,n=ae,b=le,c=pe,k=re,f=oe,D=te,i=de,u=se,_=ue,q=me;return w(),h(V,null,[e(i,null,{default:r(()=>[e(D,{ref_key:"queryFormRef",ref:I,inline:!0,model:a(o),class:"-mb-15px","label-width":"68px"},{default:r(()=>[e(m,{label:"\u65F6\u95F4\u8303\u56F4",prop:"orderDate"},{default:r(()=>[e(y,{modelValue:a(o).times,"onUpdate:modelValue":t[0]||(t[0]=l=>a(o).times=l),"default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],shortcuts:a(ie),class:"!w-240px","end-placeholder":"\u7ED3\u675F\u65E5\u671F","start-placeholder":"\u5F00\u59CB\u65E5\u671F",type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss",onChange:d},null,8,["modelValue","default-time","shortcuts"])]),_:1}),e(m,{label:"\u65F6\u95F4\u95F4\u9694",prop:"interval"},{default:r(()=>[e(b,{modelValue:a(o).interval,"onUpdate:modelValue":t[1]||(t[1]=l=>a(o).interval=l),class:"!w-240px",placeholder:"\u95F4\u9694\u7C7B\u578B",onChange:d},{default:r(()=>[(w(!0),h(V,null,F(a(W)(a(X).DATE_INTERVAL),l=>(w(),P(n,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(m,{label:"\u5F52\u5C5E\u90E8\u95E8",prop:"deptId"},{default:r(()=>[e(c,{modelValue:a(o).deptId,"onUpdate:modelValue":t[2]||(t[2]=l=>a(o).deptId=l),data:a(U),props:a(_e),"check-strictly":"",class:"!w-240px","node-key":"id",placeholder:"\u8BF7\u9009\u62E9\u5F52\u5C5E\u90E8\u95E8",onChange:t[3]||(t[3]=l=>(a(o).userId=void 0,d()))},null,8,["modelValue","data","props"])]),_:1}),e(m,{label:"\u5458\u5DE5",prop:"userId"},{default:r(()=>[e(b,{modelValue:a(o).userId,"onUpdate:modelValue":t[4]||(t[4]=l=>a(o).userId=l),class:"!w-240px",clearable:"",placeholder:"\u5458\u5DE5",onChange:d},{default:r(()=>[(w(!0),h(V,null,F(a(N),(l,C)=>(w(),P(n,{key:C,label:l.nickname,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(m,null,{default:r(()=>[e(f,{onClick:d},{default:r(()=>[e(k,{class:"mr-5px",icon:"ep:search"}),t[6]||(t[6]=Y(" \u67E5\u8BE2 "))]),_:1}),e(f,{onClick:G},{default:r(()=>[e(k,{class:"mr-5px",icon:"ep:refresh"}),t[7]||(t[7]=Y(" \u91CD\u7F6E "))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(q,null,{default:r(()=>[e(_,{modelValue:a(v),"onUpdate:modelValue":t[5]||(t[5]=l=>Z(v)?v.value=l:null)},{default:r(()=>[e(u,{label:"\u5BA2\u6237\u603B\u91CF\u5206\u6790",lazy:"",name:"customerSummary"},{default:r(()=>[e(Ce,{ref_key:"customerSummaryRef",ref:x,"query-params":a(o)},null,8,["query-params"])]),_:1}),e(u,{label:"\u5BA2\u6237\u8DDF\u8FDB\u6B21\u6570\u5206\u6790",lazy:"",name:"followUpSummary"},{default:r(()=>[e(De,{ref_key:"followUpSummaryRef",ref:g,"query-params":a(o)},null,8,["query-params"])]),_:1}),e(u,{label:"\u5BA2\u6237\u8DDF\u8FDB\u65B9\u5F0F\u5206\u6790",lazy:"",name:"followUpType"},{default:r(()=>[e(qe,{ref_key:"followUpTypeRef",ref:B,"query-params":a(o)},null,8,["query-params"])]),_:1}),e(u,{label:"\u5BA2\u6237\u8F6C\u5316\u7387\u5206\u6790",lazy:"",name:"conversionStat"},{default:r(()=>[e(ve,{ref_key:"conversionStatRef",ref:R,"query-params":a(o)},null,8,["query-params"])]),_:1}),e(u,{label:"\u516C\u6D77\u5BA2\u6237\u5206\u6790",lazy:"",name:"poolSummary"},{default:r(()=>[e(he,{ref_key:"customerPoolSummaryRef",ref:z,"query-params":a(o)},null,8,["query-params"])]),_:1}),e(u,{label:"\u5458\u5DE5\u5BA2\u6237\u6210\u4EA4\u5468\u671F\u5206\u6790",lazy:"",name:"dealCycleByUser"},{default:r(()=>[e(be,{ref_key:"dealCycleByUserRef",ref:T,"query-params":a(o)},null,8,["query-params"])]),_:1}),e(u,{label:"\u5730\u533A\u5BA2\u6237\u6210\u4EA4\u5468\u671F\u5206\u6790",lazy:"",name:"dealCycleByArea"},{default:r(()=>[e(ke,{ref_key:"dealCycleByAreaRef",ref:A,"query-params":a(o)},null,8,["query-params"])]),_:1}),e(u,{label:"\u4EA7\u54C1\u5BA2\u6237\u6210\u4EA4\u5468\u671F\u5206\u6790",lazy:"",name:"dealCycleByProduct"},{default:r(()=>[e(we,{ref_key:"dealCycleByProductRef",ref:E,"query-params":a(o)},null,8,["query-params"])]),_:1})]),_:1},8,["modelValue"])]),_:1})],64)}}});export{Ve as default};
