import{d as G,e as J,b as S,r as u,a1 as j,aw as K,n as L,o as b,c as x,f as e,w as t,u as r,F as h,p as M,q as N,x as q,k as O,G as T,C as W,A as Q,B as X,H as Z,I as $,J as ee,l as ae,m as le,E as re}from"./index-DPENBzsb.js";import{_ as te}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CnIlr_-B.js";import{E as oe}from"./el-tree-select-DxCa0FGQ.js";import{g as se}from"./index-BUzABQZW.js";import{g as ue}from"./index-Co9HWb9O.js";import{f as i,c as R,e as Y}from"./formatTime-C7TQtsxQ.js";import{h as g,d as me}from"./tree-Cts6wVCK.js";import{_ as de}from"./ContractCountPerformance.vue_vue_type_script_setup_true_lang-CG2kT7e_.js";import{_ as ne}from"./ContractPricePerformance.vue_vue_type_script_setup_true_lang-CVHpB49P.js";import{_ as pe}from"./ReceivablePricePerformance.vue_vue_type_script_setup_true_lang-XQZRe7Io.js";import"./el-skeleton-item-ByHOrDfP.js";import"./Echart.vue_vue_type_script_setup_true_lang-BK9hPyJ9.js";import"./echarts-MlQSgMpK.js";import"./performance-B9dEfUhX.js";const ce=G({name:"CrmStatisticsCustomer",__name:"index",setup(fe){const l=J({deptId:S().getUser.deptId,userId:void 0,times:[i(R(new Date(new Date().getFullYear(),0,1))),i(Y(new Date(new Date().getFullYear(),11,31)))]}),v=u(),w=u([]),C=u([]),F=j(()=>l.deptId?C.value.filter(n=>n.deptId===l.deptId):[]),d=u("ContractCountPerformance"),P=u(),I=u(),k=u(),_=()=>{var a,p,s,c,m,f;const n=parseInt(l.times[0]);switch(l.times[0]=i(R(new Date(n,0,1))),l.times[1]=i(Y(new Date(n,11,31))),d.value){case"ContractCountPerformance":(p=(a=P.value)==null?void 0:a.loadData)==null||p.call(a);break;case"ContractPricePerformance":(c=(s=I.value)==null?void 0:s.loadData)==null||c.call(s);break;case"ReceivablePricePerformance":(f=(m=k.value)==null?void 0:m.loadData)==null||f.call(m)}};K(d,()=>{_()});const U=()=>{v.value.resetFields(),_()};return L(async()=>{w.value=g(await se()),C.value=g(await ue())}),(n,a)=>{const p=T,s=W,c=oe,m=Q,f=X,D=Z,V=$,z=ee,A=te,y=ae,E=le,H=re;return b(),x(h,null,[e(A,null,{default:t(()=>[e(z,{class:"-mb-15px",model:r(l),ref_key:"queryFormRef",ref:v,inline:!0,"label-width":"68px"},{default:t(()=>[e(s,{label:"\u9009\u62E9\u5E74\u4EFD",prop:"orderDate"},{default:t(()=>[e(p,{modelValue:r(l).times[0],"onUpdate:modelValue":a[0]||(a[0]=o=>r(l).times[0]=o),class:"!w-240px",type:"year","value-format":"YYYY","default-time":[new Date().getFullYear()]},null,8,["modelValue","default-time"])]),_:1}),e(s,{label:"\u5F52\u5C5E\u90E8\u95E8",prop:"deptId"},{default:t(()=>[e(c,{modelValue:r(l).deptId,"onUpdate:modelValue":a[1]||(a[1]=o=>r(l).deptId=o),class:"!w-240px",data:r(w),props:r(me),"check-strictly":"","node-key":"id",placeholder:"\u8BF7\u9009\u62E9\u5F52\u5C5E\u90E8\u95E8",onChange:a[2]||(a[2]=o=>r(l).userId=void 0)},null,8,["modelValue","data","props"])]),_:1}),e(s,{label:"\u5458\u5DE5",prop:"userId"},{default:t(()=>[e(f,{modelValue:r(l).userId,"onUpdate:modelValue":a[3]||(a[3]=o=>r(l).userId=o),class:"!w-240px",placeholder:"\u5458\u5DE5",clearable:""},{default:t(()=>[(b(!0),x(h,null,M(r(F),(o,B)=>(b(),N(m,{label:o.nickname,value:o.id,key:B},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(s,null,{default:t(()=>[e(V,{onClick:_},{default:t(()=>[e(D,{icon:"ep:search",class:"mr-5px"}),a[5]||(a[5]=q(" \u641C\u7D22 "))]),_:1}),e(V,{onClick:U},{default:t(()=>[e(D,{icon:"ep:refresh",class:"mr-5px"}),a[6]||(a[6]=q(" \u91CD\u7F6E "))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(H,null,{default:t(()=>[e(E,{modelValue:r(d),"onUpdate:modelValue":a[4]||(a[4]=o=>O(d)?d.value=o:null)},{default:t(()=>[e(y,{label:"\u5458\u5DE5\u5408\u540C\u6570\u91CF\u7EDF\u8BA1",name:"ContractCountPerformance",lazy:""},{default:t(()=>[e(de,{"query-params":r(l),ref_key:"ContractCountPerformanceRef",ref:P},null,8,["query-params"])]),_:1}),e(y,{label:"\u5458\u5DE5\u5408\u540C\u91D1\u989D\u7EDF\u8BA1",name:"ContractPricePerformance",lazy:""},{default:t(()=>[e(ne,{"query-params":r(l),ref_key:"ContractPricePerformanceRef",ref:I},null,8,["query-params"])]),_:1}),e(y,{label:"\u5458\u5DE5\u56DE\u6B3E\u91D1\u989D\u7EDF\u8BA1",name:"ReceivablePricePerformance",lazy:""},{default:t(()=>[e(pe,{"query-params":r(l),ref_key:"ReceivablePricePerformanceRef",ref:k},null,8,["query-params"])]),_:1})]),_:1},8,["modelValue"])]),_:1})],64)}}});export{ce as default};
