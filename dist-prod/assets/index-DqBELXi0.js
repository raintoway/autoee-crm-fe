import{d as B,r as s,n as M,o as u,c as V,y as N,u as a,q as R,w as t,x as T,a3 as h,f as e,F as q,z as D,a as F,P as W,I as j,l as H,m as Q,E as S,M as G}from"./index-DPENBzsb.js";import{g as J,_ as K}from"./index-D9VBT2CA.js";import{u as O}from"./tagsView-uxrzGHKp.js";import{g as U}from"./index-NfHILKK3.js";import{_ as X}from"./ReceivablePlanDetailsHeader.vue_vue_type_script_setup_true_lang-CeMy99U0.js";import{_ as Y}from"./ReceivablePlanDetailsInfo.vue_vue_type_script_setup_true_lang-Ddh9kUxe.js";import{_ as Z}from"./PermissionList.vue_vue_type_script_setup_true_lang-Ch3d1W7H.js";import{B as z}from"./index-Cb-L5Bqt.js";import{_ as $}from"./ReceivablePlanForm.vue_vue_type_script_setup_true_lang-GTVL39Jl.js";import"./el-timeline-item-DOhCPhED.js";import"./formatTime-C7TQtsxQ.js";import"./ContentWrap.vue_vue_type_script_setup_true_lang-CnIlr_-B.js";import"./el-descriptions-item-BD45d2S6.js";import"./DictTag.vue_vue_type_script_lang-pTU0zhE7.js";import"./color-DXkOL5Tu.js";import"./PermissionForm.vue_vue_type_script_setup_true_lang-DymHMb9s.js";import"./Dialog.vue_vue_type_style_index_0_lang-ncKgepny.js";import"./index-Co9HWb9O.js";import"./index-OU-fIsLR.js";import"./index-BRgO_Nxc.js";const aa=B({name:"CrmReceivablePlanDetail",__name:"index",setup(ea){const E=D(),p=s(0),o=s(!0),r=s({}),f=s(),d=async l=>{o.value=!0;try{r.value=await U(l),await C(l)}finally{o.value=!1}},_=s(),c=s([]),C=async l=>{if(!l)return;const i=await J({bizType:z.CRM_RECEIVABLE_PLAN,bizId:l});c.value=i.list},{delView:g}=O(),{currentRoute:I}=F(),v=()=>{g(a(I))},{params:b}=W();return M(async()=>{if(!b.id)return E.warning("\u53C2\u6570\u9519\u8BEF\uFF0C\u56DE\u6B3E\u8BA1\u5212\u4E0D\u80FD\u4E3A\u7A7A\uFF01"),void v();p.value=b.id,await d(p.value)}),(l,i)=>{const L=j,n=H,k=K,x=Q,A=S,P=G;return u(),V(q,null,[N((u(),R(X,{"receivable-plan":a(r)},{default:t(()=>{var m;return[(m=a(f))!=null&&m.validateWrite?(u(),R(L,{key:0,onClick:i[0]||(i[0]=ia=>{return y="update",w=a(r).id,void _.value.open(y,w);var y,w})},{default:t(()=>i[2]||(i[2]=[T(" \u7F16\u8F91 ")])),_:1})):h("",!0)]}),_:1},8,["receivable-plan"])),[[P,a(o)]]),e(A,null,{default:t(()=>[e(x,null,{default:t(()=>[e(n,{label:"\u8BE6\u7EC6\u8D44\u6599"},{default:t(()=>[e(Y,{"receivable-plan":a(r)},null,8,["receivable-plan"])]),_:1}),e(n,{label:"\u64CD\u4F5C\u65E5\u5FD7"},{default:t(()=>[e(k,{"log-list":a(c)},null,8,["log-list"])]),_:1}),e(n,{label:"\u56E2\u961F\u6210\u5458"},{default:t(()=>[e(Z,{ref_key:"permissionListRef",ref:f,"biz-id":a(r).id,"biz-type":a(z).CRM_RECEIVABLE_PLAN,"show-action":!0,onQuitTeam:v},null,8,["biz-id","biz-type"])]),_:1})]),_:1})]),_:1}),e($,{ref_key:"formRef",ref:_,onSuccess:i[1]||(i[1]=m=>d(a(r).id))},null,512)],64)}}});export{aa as default};
