import{d as T,r as o,n as h,o as u,c as q,y as D,u as a,q as w,w as t,x as F,a3 as Q,f as i,F as W,P as R,z as j,a as H,I as O,l as S,m as G,E as J,M as K}from"./index-DPENBzsb.js";import{g as N,_ as U}from"./index-D9VBT2CA.js";import{u as X}from"./tagsView-uxrzGHKp.js";import{g as Y}from"./index-DBsmcN-E.js";import{_ as Z}from"./ReceivableDetailsHeader.vue_vue_type_script_setup_true_lang-C7LiT4zs.js";import{_ as $}from"./ReceivableDetailsInfo.vue_vue_type_script_setup_true_lang-3zLNatkb.js";import{_ as aa}from"./PermissionList.vue_vue_type_script_setup_true_lang-Ch3d1W7H.js";import{B as z}from"./index-Cb-L5Bqt.js";import{_ as ea}from"./ReceivableForm.vue_vue_type_script_setup_true_lang-Byp1QREC.js";import"./el-timeline-item-DOhCPhED.js";import"./formatTime-C7TQtsxQ.js";import"./ContentWrap.vue_vue_type_script_setup_true_lang-CnIlr_-B.js";import"./el-descriptions-item-BD45d2S6.js";import"./DictTag.vue_vue_type_script_lang-pTU0zhE7.js";import"./color-DXkOL5Tu.js";import"./PermissionForm.vue_vue_type_script_setup_true_lang-DymHMb9s.js";import"./Dialog.vue_vue_type_style_index_0_lang-ncKgepny.js";import"./index-Co9HWb9O.js";import"./index-NfHILKK3.js";import"./index-OU-fIsLR.js";import"./index-BRgO_Nxc.js";const ia=T({name:"CrmReceivablePlanDetail",__name:"index",props:{id:{}},setup(E){const C=E,g=R(),k=j(),p=o(0),s=o(!0),l=o({}),f=o(),d=async e=>{s.value=!0;try{l.value=await Y(e),await x(e)}finally{s.value=!1}},c=o(),_=o([]),x=async e=>{if(!e)return;const r=await N({bizType:z.CRM_RECEIVABLE,bizId:e});_.value=r.list},{delView:I}=X(),{currentRoute:B}=H(),v=()=>{I(a(B))};return R(),h(async()=>{const e=C.id||g.params.id;if(!e)return k.warning("\u53C2\u6570\u9519\u8BEF\uFF0C\u56DE\u6B3E\u4E0D\u80FD\u4E3A\u7A7A\uFF01"),void v();p.value=e,await d(p.value)}),(e,r)=>{const L=O,m=S,M=U,V=G,A=J,P=K;return u(),q(W,null,[D((u(),w(Z,{receivable:a(l)},{default:t(()=>{var n;return[(n=a(f))!=null&&n.validateWrite?(u(),w(L,{key:0,onClick:r[0]||(r[0]=ra=>{return b="update",y=a(l).id,void c.value.open(b,y);var b,y})},{default:t(()=>r[2]||(r[2]=[F(" \u7F16\u8F91 ")])),_:1})):Q("",!0)]}),_:1},8,["receivable"])),[[P,a(s)]]),i(A,null,{default:t(()=>[i(V,null,{default:t(()=>[i(m,{label:"\u8BE6\u7EC6\u8D44\u6599"},{default:t(()=>[i($,{receivable:a(l)},null,8,["receivable"])]),_:1}),i(m,{label:"\u64CD\u4F5C\u65E5\u5FD7"},{default:t(()=>[i(M,{"log-list":a(_)},null,8,["log-list"])]),_:1}),i(m,{label:"\u56E2\u961F\u6210\u5458"},{default:t(()=>[i(aa,{ref_key:"permissionListRef",ref:f,"biz-id":a(l).id,"biz-type":a(z).CRM_RECEIVABLE,"show-action":!0,onQuitTeam:v},null,8,["biz-id","biz-type"])]),_:1})]),_:1})]),_:1}),i(ea,{ref_key:"formRef",ref:c,onSuccess:r[1]||(r[1]=n=>d(a(l).id))},null,512)],64)}}});export{ia as default};
