import{_ as L}from"./Dialog.vue_vue_type_style_index_0_lang-ncKgepny.js";import{d as M,ag as k,r as d,aw as P,c as S,f as e,w as t,u as l,k as D,F,L as K,o as y,x as u,t as f,D as j,q,a3 as z,am as H,K as E,H as G,I as J,al as N}from"./index-DPENBzsb.js";import{_ as O}from"./DictTag.vue_vue_type_script_lang-pTU0zhE7.js";import{d as I,a as Q}from"./formatTime-C7TQtsxQ.js";import{b as R}from"./formCreate-BQ5MeUYD.js";import{g as W}from"./index-D2cLVQ1T.js";const X=M({name:"BpmProcessInstanceTaskList",__name:"ProcessInstanceTaskList",props:{loading:k.bool.def(!1),id:k.string},setup(T){const c=T,w=d([]),i=d(),s=d({rule:[],option:{},value:{}}),m=d(!1);return P(()=>c.loading,async _=>{_&&(w.value=await W(c.id))}),(_,o)=>{const r=E,V=O,U=G,x=J,A=K,B=N("form-create"),C=L;return y(),S(F,null,[e(A,{data:l(w),border:"","header-cell-class-name":"table-header-gray"},{default:t(()=>[e(r,{label:"\u5BA1\u6279\u8282\u70B9",prop:"name","min-width":"120",align:"center"}),e(r,{label:"\u5BA1\u6279\u4EBA","min-width":"100",align:"center"},{default:t(a=>{var p,n;return[u(f(((p=a.row.assigneeUser)==null?void 0:p.nickname)||((n=a.row.ownerUser)==null?void 0:n.nickname)),1)]}),_:1}),e(r,{formatter:l(I),align:"center",label:"\u5F00\u59CB\u65F6\u95F4",prop:"createTime","min-width":"140"},null,8,["formatter"]),e(r,{formatter:l(I),align:"center",label:"\u7ED3\u675F\u65F6\u95F4",prop:"endTime","min-width":"140"},null,8,["formatter"]),e(r,{align:"center",label:"\u5BA1\u6279\u72B6\u6001",prop:"status","min-width":"90"},{default:t(a=>[e(V,{type:l(j).BPM_TASK_STATUS,value:a.row.status},null,8,["type","value"])]),_:1}),e(r,{align:"center",label:"\u5BA1\u6279\u5EFA\u8BAE",prop:"reason","min-width":"200"},{default:t(a=>[u(f(a.row.reason)+" ",1),a.row.formId>0?(y(),q(x,{key:0,class:"ml-10px",size:"small",onClick:p=>(async n=>{var b,g,h,v;R(s,n.formConf,n.formFields,n.formVariables),m.value=!0,await H(),i.value.fapi.btn.show(!1),(g=(b=i.value)==null?void 0:b.fapi)==null||g.resetBtn.show(!1),(v=(h=i.value)==null?void 0:h.fapi)==null||v.disabled(!0)})(a.row)},{default:t(()=>[e(U,{icon:"ep:document"}),o[2]||(o[2]=u(" \u67E5\u770B\u8868\u5355 "))]),_:2},1032,["onClick"])):z("",!0)]),_:1}),e(r,{align:"center",label:"\u8017\u65F6",prop:"durationInMillis","min-width":"100"},{default:t(a=>[u(f(l(Q)(a.row.durationInMillis)),1)]),_:1})]),_:1},8,["data"]),e(C,{title:"\u8868\u5355\u8BE6\u60C5",modelValue:l(m),"onUpdate:modelValue":o[1]||(o[1]=a=>D(m)?m.value=a:null),width:"600"},{default:t(()=>[e(B,{ref_key:"fApi",ref:i,modelValue:l(s).value,"onUpdate:modelValue":o[0]||(o[0]=a=>l(s).value=a),option:l(s).option,rule:l(s).rule},null,8,["modelValue","option","rule"])]),_:1},8,["modelValue"])],64)}}});export{X as _};
