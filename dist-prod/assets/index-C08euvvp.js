import{d as Q,z as W,h as X,r as i,e as Z,n as $,U as ee,o as s,c as P,f as e,w as o,u as t,N as z,F as A,p as le,O as ae,D as h,q as m,x as u,y as f,T as te,C as oe,A as re,B as se,G as ne,H as pe,I as ie,J as me,K as ue,L as ce,M as de}from"./index-DPENBzsb.js";import{_ as fe}from"./index.vue_vue_type_script_setup_true_lang-CvB_IkZW.js";import{_ as ye}from"./DictTag.vue_vue_type_script_lang-pTU0zhE7.js";import{_ as _e}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CnIlr_-B.js";import{_ as ge}from"./index-CbaPuDB3.js";import{d as be}from"./formatTime-C7TQtsxQ.js";import{d as ke}from"./download-oWiM5xVU.js";import{b as we,d as ve,e as xe}from"./index-tb7T-AVj.js";import{_ as Ce}from"./RoleForm.vue_vue_type_script_setup_true_lang-D-isp5fS.js";import{_ as he}from"./RoleAssignMenuForm.vue_vue_type_script_setup_true_lang-B8-PN2Zi.js";import{_ as Se}from"./RoleDataPermissionForm.vue_vue_type_script_setup_true_lang-CA6uZ5mg.js";import"./index-C2tU_CDa.js";import"./color-DXkOL5Tu.js";import"./Dialog.vue_vue_type_style_index_0_lang-ncKgepny.js";import"./constants-C8tGWvl2.js";import"./tree-Cts6wVCK.js";import"./index-BVRKhr7s.js";import"./index-COAxjvEa.js";import"./index-BUzABQZW.js";const Te=Q({name:"SystemRole",__name:"index",setup(Ve){const w=W(),{t:I}=X(),v=i(!0),S=i(0),T=i([]),r=Z({pageNo:1,pageSize:10,code:"",name:"",status:void 0,createTime:[]}),V=i(),x=i(!1),c=async()=>{v.value=!0;try{const d=await we(r);T.value=d.list,S.value=d.total}finally{v.value=!1}},b=()=>{r.pageNo=1,c()},E=()=>{V.value.resetFields(),b()},M=i(),U=(d,l)=>{M.value.open(d,l)},N=i(),Y=i(),H=async()=>{try{await w.exportConfirm(),x.value=!0;const d=await xe(r);ke.excel(d,"\u89D2\u8272\u5217\u8868.xls")}catch{}finally{x.value=!1}};return $(()=>{c()}),(d,l)=>{const O=ge,R=te,_=oe,K=re,q=se,L=ne,k=pe,p=ie,B=me,D=_e,n=ue,F=ye,G=ce,J=fe,y=ee("hasPermi"),j=de;return s(),P(A,null,[e(O,{title:"\u529F\u80FD\u6743\u9650",url:"https://doc.iocoder.cn/resource-permission"}),e(O,{title:"\u6570\u636E\u6743\u9650",url:"https://doc.iocoder.cn/data-permission"}),e(D,null,{default:o(()=>[e(B,{ref_key:"queryFormRef",ref:V,inline:!0,model:t(r),class:"-mb-15px","label-width":"68px"},{default:o(()=>[e(_,{label:"\u89D2\u8272\u540D\u79F0",prop:"name"},{default:o(()=>[e(R,{modelValue:t(r).name,"onUpdate:modelValue":l[0]||(l[0]=a=>t(r).name=a),class:"!w-240px",clearable:"",placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0",onKeyup:z(b,["enter"])},null,8,["modelValue"])]),_:1}),e(_,{label:"\u89D2\u8272\u6807\u8BC6",prop:"code"},{default:o(()=>[e(R,{modelValue:t(r).code,"onUpdate:modelValue":l[1]||(l[1]=a=>t(r).code=a),class:"!w-240px",clearable:"",placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u6807\u8BC6",onKeyup:z(b,["enter"])},null,8,["modelValue"])]),_:1}),e(_,{label:"\u72B6\u6001",prop:"status"},{default:o(()=>[e(q,{modelValue:t(r).status,"onUpdate:modelValue":l[2]||(l[2]=a=>t(r).status=a),class:"!w-240px",clearable:"",placeholder:"\u8BF7\u9009\u62E9\u72B6\u6001"},{default:o(()=>[(s(!0),P(A,null,le(t(ae)(t(h).COMMON_STATUS),a=>(s(),m(K,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(_,{label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime"},{default:o(()=>[e(L,{modelValue:t(r).createTime,"onUpdate:modelValue":l[3]||(l[3]=a=>t(r).createTime=a),"default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],class:"!w-240px","end-placeholder":"\u7ED3\u675F\u65E5\u671F","start-placeholder":"\u5F00\u59CB\u65E5\u671F",type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue","default-time"])]),_:1}),e(_,null,{default:o(()=>[e(p,{onClick:b},{default:o(()=>[e(k,{class:"mr-5px",icon:"ep:search"}),l[7]||(l[7]=u(" \u641C\u7D22 "))]),_:1}),e(p,{onClick:E},{default:o(()=>[e(k,{class:"mr-5px",icon:"ep:refresh"}),l[8]||(l[8]=u(" \u91CD\u7F6E "))]),_:1}),f((s(),m(p,{plain:"",type:"primary",onClick:l[4]||(l[4]=a=>U("create"))},{default:o(()=>[e(k,{class:"mr-5px",icon:"ep:plus"}),l[9]||(l[9]=u(" \u65B0\u589E "))]),_:1})),[[y,["system:role:create"]]]),f((s(),m(p,{loading:t(x),plain:"",type:"success",onClick:H},{default:o(()=>[e(k,{class:"mr-5px",icon:"ep:download"}),l[10]||(l[10]=u(" \u5BFC\u51FA "))]),_:1},8,["loading"])),[[y,["system:role:export"]]])]),_:1})]),_:1},8,["model"])]),_:1}),e(D,null,{default:o(()=>[f((s(),m(G,{data:t(T)},{default:o(()=>[e(n,{align:"center",label:"\u89D2\u8272\u7F16\u53F7",prop:"id"}),e(n,{align:"center",label:"\u89D2\u8272\u540D\u79F0",prop:"name"}),e(n,{label:"\u89D2\u8272\u7C7B\u578B",align:"center",prop:"type"},{default:o(a=>[e(F,{type:t(h).SYSTEM_ROLE_TYPE,value:a.row.type},null,8,["type","value"])]),_:1}),e(n,{align:"center",label:"\u89D2\u8272\u6807\u8BC6",prop:"code"}),e(n,{align:"center",label:"\u663E\u793A\u987A\u5E8F",prop:"sort"}),e(n,{align:"center",label:"\u5907\u6CE8",prop:"remark"}),e(n,{align:"center",label:"\u72B6\u6001",prop:"status"},{default:o(a=>[e(F,{type:t(h).COMMON_STATUS,value:a.row.status},null,8,["type","value"])]),_:1}),e(n,{formatter:t(be),align:"center",label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime",width:"180"},null,8,["formatter"]),e(n,{width:300,align:"center",label:"\u64CD\u4F5C"},{default:o(a=>[f((s(),m(p,{link:"",type:"primary",onClick:C=>U("update",a.row.id)},{default:o(()=>l[11]||(l[11]=[u(" \u7F16\u8F91 ")])),_:2},1032,["onClick"])),[[y,["system:role:update"]]]),f((s(),m(p,{link:"",preIcon:"ep:basketball",title:"\u83DC\u5355\u6743\u9650",type:"primary",onClick:C=>(async g=>{Y.value.open(g)})(a.row)},{default:o(()=>l[12]||(l[12]=[u(" \u83DC\u5355\u6743\u9650 ")])),_:2},1032,["onClick"])),[[y,["system:permission:assign-role-menu"]]]),f((s(),m(p,{link:"",preIcon:"ep:coin",title:"\u6570\u636E\u6743\u9650",type:"primary",onClick:C=>(async g=>{N.value.open(g)})(a.row)},{default:o(()=>l[13]||(l[13]=[u(" \u6570\u636E\u6743\u9650 ")])),_:2},1032,["onClick"])),[[y,["system:permission:assign-role-data-scope"]]]),f((s(),m(p,{link:"",type:"danger",onClick:C=>(async g=>{try{await w.delConfirm(),await ve(g),w.success(I("common.delSuccess")),await c()}catch{}})(a.row.id)},{default:o(()=>l[14]||(l[14]=[u(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[y,["system:role:delete"]]])]),_:1})]),_:1},8,["data"])),[[j,t(v)]]),e(J,{limit:t(r).pageSize,"onUpdate:limit":l[5]||(l[5]=a=>t(r).pageSize=a),page:t(r).pageNo,"onUpdate:page":l[6]||(l[6]=a=>t(r).pageNo=a),total:t(S),onPagination:c},null,8,["limit","page","total"])]),_:1}),e(Ce,{ref_key:"formRef",ref:M,onSuccess:c},null,512),e(he,{ref_key:"assignMenuFormRef",ref:Y,onSuccess:c},null,512),e(Se,{ref_key:"dataPermissionFormRef",ref:N,onSuccess:c},null,512)],64)}}});export{Te as default};
