import{d as D,h as F,z as G,r as d,e as T,aw as j,U as H,o as i,c as K,f as a,w as r,y as u,q as m,x as w,u as o,F as M,H as R,I as W,K as A,L as B,M as E}from"./index-DPENBzsb.js";import{_ as J}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CnIlr_-B.js";import{_ as O}from"./index.vue_vue_type_script_setup_true_lang-CvB_IkZW.js";import{d as Q}from"./formatTime-C7TQtsxQ.js";import{k as V,l as X}from"./index-DFJOYDzB.js";import{_ as Y}from"./Demo03GradeForm.vue_vue_type_script_setup_true_lang-pAtFUrNv.js";const Z=D({__name:"Demo03GradeList",props:{studentId:{}},setup(C){const{t:S}=F(),c=G(),f=C,g=d(!1),k=d([]),h=d(0),s=T({pageNo:1,pageSize:10,studentId:void 0});j(()=>f.studentId,t=>{t&&(s.studentId=t,b())},{immediate:!0,deep:!0});const p=async()=>{g.value=!0;try{const t=await V(s);k.value=t.list,h.value=t.total}finally{g.value=!1}},b=()=>{s.pageNo=1,p()},v=d(),I=(t,e)=>{f.studentId?v.value.open(t,e,f.studentId):c.error("\u8BF7\u9009\u62E9\u4E00\u4E2A\u5B66\u751F")};return(t,e)=>{const N=R,_=W,n=A,x=B,z=O,P=J,y=H("hasPermi"),U=E;return i(),K(M,null,[a(P,null,{default:r(()=>[u((i(),m(_,{plain:"",type:"primary",onClick:e[0]||(e[0]=l=>I("create"))},{default:r(()=>[a(N,{class:"mr-5px",icon:"ep:plus"}),e[3]||(e[3]=w(" \u65B0\u589E "))]),_:1})),[[y,["infra:demo03-student:create"]]]),u((i(),m(x,{data:o(k),"show-overflow-tooltip":!0,stripe:!0},{default:r(()=>[a(n,{align:"center",label:"\u7F16\u53F7",prop:"id"}),a(n,{align:"center",label:"\u540D\u5B57",prop:"name"}),a(n,{align:"center",label:"\u73ED\u4E3B\u4EFB",prop:"teacher"}),a(n,{formatter:o(Q),align:"center",label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime",width:"180px"},null,8,["formatter"]),a(n,{align:"center",label:"\u64CD\u4F5C"},{default:r(l=>[u((i(),m(_,{link:"",type:"primary",onClick:L=>I("update",l.row.id)},{default:r(()=>e[4]||(e[4]=[w(" \u7F16\u8F91 ")])),_:2},1032,["onClick"])),[[y,["infra:demo03-student:update"]]]),u((i(),m(_,{link:"",type:"danger",onClick:L=>(async q=>{try{await c.delConfirm(),await X(q),c.success(S("common.delSuccess")),await p()}catch{}})(l.row.id)},{default:r(()=>e[5]||(e[5]=[w(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[y,["infra:demo03-student:delete"]]])]),_:1})]),_:1},8,["data"])),[[U,o(g)]]),a(z,{limit:o(s).pageSize,"onUpdate:limit":e[1]||(e[1]=l=>o(s).pageSize=l),page:o(s).pageNo,"onUpdate:page":e[2]||(e[2]=l=>o(s).pageNo=l),total:o(h),onPagination:p},null,8,["limit","page","total"])]),_:1}),a(Y,{ref_key:"formRef",ref:v,onSuccess:p},null,512)],64)}}});export{Z as _};
