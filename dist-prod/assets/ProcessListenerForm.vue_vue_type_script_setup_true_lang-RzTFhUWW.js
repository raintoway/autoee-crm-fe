import{d as I,h as j,z as Y,r as m,e as z,o,q as r,w as t,f as s,u as l,x as T,y as D,c as p,F as c,p as y,O as J,D as P,t as G,dR as C,k as H,T as K,C as Q,ai as W,aj as X,A as Z,B as $,J as ee,I as le,M as ae}from"./index-DPENBzsb.js";import{_ as ue}from"./Dialog.vue_vue_type_style_index_0_lang-ncKgepny.js";import{P as h}from"./index-IbQXwv2T.js";import{C as te}from"./constants-C8tGWvl2.js";const se=I({name:"ProcessListenerForm",__name:"ProcessListenerForm",emits:["success"],setup(oe,{expose:L,emit:q}){const{t:f}=j(),E=Y(),n=m(!1),k=m(""),i=m(!1),S=m(""),u=m({id:void 0,name:void 0,type:void 0,status:void 0,event:void 0,valueType:void 0,value:void 0}),w=z({name:[{required:!0,message:"\u540D\u5B57\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],type:[{required:!0,message:"\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}],status:[{required:!0,message:"\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],event:[{required:!0,message:"\u76D1\u542C\u4E8B\u4EF6\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],valueType:[{required:!0,message:"\u503C\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}],value:[{required:!0,message:"\u503C\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),_=m();L({open:async(d,a)=>{if(n.value=!0,k.value=f("action."+d),S.value=d,x(),a){i.value=!0;try{u.value=await h.getProcessListener(a)}finally{i.value=!1}}}});const M=q,R=async()=>{await _.value.validate(),i.value=!0;try{const d=u.value;S.value==="create"?(await h.createProcessListener(d),E.success(f("common.createSuccess"))):(await h.updateProcessListener(d),E.success(f("common.updateSuccess"))),n.value=!1,M("success")}finally{i.value=!1}},x=()=>{var d;u.value={id:void 0,name:void 0,type:void 0,status:te.ENABLE,event:void 0,valueType:void 0,value:void 0},(d=_.value)==null||d.resetFields()};return(d,a)=>{const V=K,v=Q,F=W,O=X,b=Z,g=$,A=ee,U=le,B=ue,N=ae;return o(),r(B,{title:l(k),modelValue:l(n),"onUpdate:modelValue":a[9]||(a[9]=e=>H(n)?n.value=e:null)},{footer:t(()=>[s(U,{onClick:R,type:"primary",disabled:l(i)},{default:t(()=>a[10]||(a[10]=[T("\u786E \u5B9A")])),_:1},8,["disabled"]),s(U,{onClick:a[8]||(a[8]=e=>n.value=!1)},{default:t(()=>a[11]||(a[11]=[T("\u53D6 \u6D88")])),_:1})]),default:t(()=>[D((o(),r(A,{ref_key:"formRef",ref:_,model:l(u),rules:l(w),"label-width":"110px"},{default:t(()=>[s(v,{label:"\u540D\u5B57",prop:"name"},{default:t(()=>[s(V,{modelValue:l(u).name,"onUpdate:modelValue":a[0]||(a[0]=e=>l(u).name=e),placeholder:"\u8BF7\u8F93\u5165\u540D\u5B57"},null,8,["modelValue"])]),_:1}),s(v,{label:"\u72B6\u6001",prop:"status"},{default:t(()=>[s(O,{modelValue:l(u).status,"onUpdate:modelValue":a[1]||(a[1]=e=>l(u).status=e)},{default:t(()=>[(o(!0),p(c,null,y(l(J)(l(P).COMMON_STATUS),e=>(o(),r(F,{key:e.value,value:e.value},{default:t(()=>[T(G(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),s(v,{label:"\u7C7B\u578B",prop:"type"},{default:t(()=>[s(g,{modelValue:l(u).type,"onUpdate:modelValue":a[2]||(a[2]=e=>l(u).type=e),placeholder:"\u8BF7\u9009\u62E9\u7C7B\u578B",onChange:a[3]||(a[3]=e=>l(u).event=void 0)},{default:t(()=>[(o(!0),p(c,null,y(l(C)(l(P).BPM_PROCESS_LISTENER_TYPE),e=>(o(),r(b,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),s(v,{label:"\u4E8B\u4EF6",prop:"event"},{default:t(()=>[s(g,{modelValue:l(u).event,"onUpdate:modelValue":a[4]||(a[4]=e=>l(u).event=e),placeholder:"\u8BF7\u9009\u62E9\u4E8B\u4EF6"},{default:t(()=>[(o(!0),p(c,null,y(l(u).type=="execution"?["start","end"]:["create","assignment","complete","delete","update","timeout"],e=>(o(),r(b,{label:e,value:e,key:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),s(v,{label:"\u503C\u7C7B\u578B",prop:"valueType"},{default:t(()=>[s(g,{modelValue:l(u).valueType,"onUpdate:modelValue":a[5]||(a[5]=e=>l(u).valueType=e),placeholder:"\u8BF7\u9009\u62E9\u503C\u7C7B\u578B"},{default:t(()=>[(o(!0),p(c,null,y(l(C)(l(P).BPM_PROCESS_LISTENER_VALUE_TYPE),e=>(o(),r(b,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(u).type=="class"?(o(),r(v,{key:0,label:"\u7C7B\u8DEF\u5F84",prop:"value"},{default:t(()=>[s(V,{modelValue:l(u).value,"onUpdate:modelValue":a[6]||(a[6]=e=>l(u).value=e),placeholder:"\u8BF7\u8F93\u5165\u7C7B\u8DEF\u5F84"},null,8,["modelValue"])]),_:1})):(o(),r(v,{key:1,label:"\u8868\u8FBE\u5F0F",prop:"value"},{default:t(()=>[s(V,{modelValue:l(u).value,"onUpdate:modelValue":a[7]||(a[7]=e=>l(u).value=e),placeholder:"\u8BF7\u8F93\u5165\u8868\u8FBE\u5F0F"},null,8,["modelValue"])]),_:1}))]),_:1},8,["model","rules"])),[[N,l(i)]])]),_:1},8,["title","modelValue"])}}});export{se as _};
