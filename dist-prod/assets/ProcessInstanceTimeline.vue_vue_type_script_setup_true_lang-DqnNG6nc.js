import{_ as t2}from"./index-NekN2je6.js";import{d as r2,r as K,o as s,c,f as x,w as d,F as u,p as T,q as r,g as w,aR as S,aS as n2,a3 as h,t as n,u as p,de as j,x as f,df as d2,aT as p2,I as f2,aY as v2,H as m2,bK as Y,dg as q,dh as J,da as g2,di as x2,dj as h2}from"./index-DPENBzsb.js";import{E as u2,a as w2}from"./el-timeline-item-DOhCPhED.js";import{E as k2}from"./el-image-DqGFoayu.js";import{E as b2}from"./el-avatar-BjIHlmF4.js";import{f as U}from"./formatTime-C7TQtsxQ.js";import{T as Q}from"./index-D2cLVQ1T.js";import{N as l,C as y2}from"./consts-Dqfik1EE.js";const _2={class:"position-absolute left--10px top--6px rounded-full border border-solid border-#dedede w-30px h-30px flex justify-center items-center bg-#3f73f7 p-5px"},T2=["src"],E2=["id"],z2={class:"flex w-full"},S2={class:"font-bold"},U2={key:0,class:"text-#a5a5a5 text-13px mt-1 ml-auto"},N2={key:0,class:"flex flex-wrap gap2 items-center"},O2={key:1,class:"flex items-center flex-wrap mt-1 gap2"},R2={key:0,class:"position-relative flex flex-wrap gap2"},V2={class:"bg-gray-100 h-35px rounded-3xl flex items-center pr-8px dark:color-gray-600 position-relative"},C2={key:0,class:"text-#a5a5a5 text-13px mt-1 w-full bg-#f8f8fa p2 rounded-md"},D2={key:1,class:"text-#a5a5a5 text-13px mt-1 w-full bg-#f8f8fa p2 rounded-md"},A2=r2({name:"BpmProcessInstanceTimeline",__name:"ProcessInstanceTimeline",props:{activityNodes:{},showStatusIcon:{type:Boolean,default:!0}},emits:["selectUserConfirm"],setup(F2,{emit:G}){const y={"-1":{color:"#909398",icon:"ep-clock"},0:{color:"#00b32a",icon:"ep:loading"},1:{color:"#448ef7",icon:"ep:loading"},2:{color:"#00b32a",icon:"ep:circle-check-filled"},3:{color:"#f46b6c",icon:"fa-solid:times-circle"},4:{color:"#cccccc",icon:"ep:delete-filled"},5:{color:"#f46b6c",icon:"ep:remove-filled"},6:{color:"#448ef7",icon:"ep:loading"},7:{color:"#00b32a",icon:"ep:circle-check-filled"}},N={"-1":{color:"#909398",icon:Y},0:{color:"#00b32a",icon:Y},1:{color:"#448ef7",icon:q},2:{color:"#00b32a",icon:J},3:{color:"#f46b6c",icon:g2},4:{color:"#cccccc",icon:x2},5:{color:"#f46b6c",icon:h2},6:{color:"#448ef7",icon:q},7:{color:"#00b32a",icon:J}},W={[l.END_EVENT_NODE]:{color:"#909398",svg:"data:image/svg+xml,%3csvg%20t='1730189225011'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='2651'%20id='mx_n_1730189225011'%20width='200'%20height='200'%3e%3cpath%20d='M793.889347%20200.380242c27.648573%2020.615681%2042.196018%2032.710677%2063.781037%2056.119312%2025.313864%2027.453234%2043.242957%2048.52047%2064.502857%2086.507991%2044.537416%2079.580127%2053.527718%20136.949077%2053.517684%20212.063821%200%2064.933675-15.452562%20130.459388-40.138263%20187.311893-22.076044%2050.841799-61.545336%20104.359483-101.886297%20138.933914-45.506755%2039.001681-81.214423%2060.462941-137.605337%2081.826531-55.699867%2021.102023-114.070267%2028.641326-181.379458%2027.791064-68.274516-0.862973-129.364283-11.040029-180.533878-31.80489-46.159002-18.731189-98.338744-46.827973-141.596418-87.541551-43.946046-41.361142-70.369064-75.958317-93.88139-127.198155-26.157437-57.004361-40.094111-129.065922-39.680686-191.781288%200-36.980719%204.033895-70.902234%2012.252873-105.241856%208.532726-35.651474%2020.069131-69.572989%2038.13135-102.35257%2018.856956-34.221214%2036.754607-62.067803%2058.869452-88.973149%2023.248751-28.285434%2039.2104-46.417894%2064.295476-63.475987%2018.297696-12.442861%2036.879036-9.295353%2047.199252-2.306612%204.403836%202.982273%208.919391%206.577992%2012.933218%2012.933217%209.572307%2015.156208-0.334486%2029.769212-6.69038%2038.465836-7.148625%209.781026-23.130343%2026.023643-38.738775%2043.218205-38.192895%2042.075603-55.133918%2065.965228-74.986303%20106.965794-30.772668%2063.552249-37.495827%20115.718611-38.131349%20166.573791-0.668971%2053.517684%209.995096%2099.647251%2027.427813%20140.483919%2033.916163%2080.572211%2094.807915%20144.44289%20175.270414%20178.615938%2041.108271%2017.845472%20113.812713%2037.319888%20181.960793%2038.13135%2056.193568%200.668971%20125.919751-11.321666%20166.574459-28.096784%2045.935566-18.954626%2097.223569-56.862539%20127.10383-94.324918%2023.013273-28.852721%2052.179742-70.910931%2064.413884-105.694749%2014.863868-42.260239%2024.806784-87.661297%2024.559934-132.458943%200-54.414105-11.53373-108.417461-36.918505-156.856317-20.16747-38.483228-46.480777-74.607665-84.66899-108.048189-13.377414-11.714352-23.822728-20.067124-38.808348-31.619586-10.191774-7.857065-36.059546-25.027545-28.923632-47.326356%204.970455-15.53217%2018.303717-25.294464%2031.887843-27.205046%2019.456354-2.736092%2028.565733%202.427027%2043.705885%2012.041479l6.179955%204.322891zM510.755379%20531.65738c-8.696624-0.668971-10.034566-0.446204-20.738102-6.689711-11.031333-6.434832-17.839451-21.183637-16.514219-35.175166V92.220334c0-18.178619%200.386665-22.815926%208.988295-31.685813%205.351768-5.519011%2010.963097-11.381873%2026.08987-11.539751%2016.055305-0.167243%2021.407073%203.846584%2027.929542%209.700081%209.70677%208.711341%2010.703537%2017.56049%2010.377078%2033.525483v397.5715c-0.509756%2015.273947%200.326458%2022.967114-11.380535%2033.502739-3.884046%203.495374-8.027653%207.693167-20.96087%208.362138l-3.791059%200.000669z%20m4.453341%200.573308'%20p-id='2652'%20fill='%23ffffff'%3e%3c/path%3e%3c/svg%3e"},[l.START_USER_NODE]:{color:"#909398",svg:"data:image/svg+xml,%3csvg%20t='1729561814171'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='1359'%20width='200'%20height='200'%3e%3cpath%20d='M674.496%20603.456c120.256%200%20218.176%2090.752%20221.44%20203.84l0.064%205.888v125.888c0%2011.52-9.92%2020.928-22.144%2020.928h-44.352a21.568%2021.568%200%200%201-22.144-20.928v-125.888c0-67.712-56.512-123.264-128-125.76l-4.928-0.064H349.568c-71.488%200-130.176%2053.504-132.864%20121.152l-0.064%204.672v125.888c0%2011.52-9.92%2020.928-22.144%2020.928h-44.352A21.568%2021.568%200%200%201%20128%20939.072v-125.888c0-113.92%2095.872-206.528%20215.36-209.664l6.208-0.064h324.928zM497.216%20128c122.368%200%20221.568%2093.888%20221.568%20209.728s-99.2%20209.792-221.568%20209.792c-122.304%200-221.44-93.952-221.44-209.728C275.712%20221.952%20374.848%20128%20497.152%20128z%20m0%2083.904c-73.408%200-132.864%2056.32-132.864%20125.888%200%2069.504%2059.52%20125.824%20132.864%20125.824%2073.408%200%20132.928-56.32%20132.928-125.824%200-69.504-59.52-125.888-132.928-125.888z'%20fill='%23fff'%20p-id='1360'%3e%3c/path%3e%3c/svg%3e"},[l.USER_TASK_NODE]:{color:"#ff943e",svg:"data:image/svg+xml,%3csvg%20t='1729561718271'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='8640'%20width='200'%20height='200'%3e%3cpath%20d='M908.5952%20920.4224H164.7616a31.0784%2031.0784%200%200%201-30.976-30.976c0-17.0496%2013.9264-30.976%2030.976-30.976h743.8336c17.0496%200%2031.0272%2013.9264%2031.0272%2030.976a31.0784%2031.0784%200%200%201-31.0272%2030.976z%20m0-123.9552H164.7616a31.0784%2031.0784%200%200%201-30.976-30.976v-154.9824c0-51.1488%2041.8304-92.9792%2092.9792-92.9792h198.3488c-6.1952-37.1712-24.7808-72.8064-51.1488-103.8336a216.576%20216.576%200%200%201-54.2208-144.128c0-58.88%2023.2448-114.688%2066.6112-156.4672C429.7728%2071.168%20485.5296%2051.0976%20545.9968%2052.6848c111.5648%204.608%20206.08%20100.6592%20207.616%20212.2752%201.536%2055.808-20.1216%20110.0288-57.344%20151.8592-26.3168%2027.904-41.8304%2061.952-48.0256%20100.7104h198.3488c51.2%200%2093.0304%2041.8304%2093.0304%2092.9792v154.9824a31.0784%2031.0784%200%200%201-31.0272%2030.976z%20m-712.8064-61.952H877.568v-124.0064a31.0784%2031.0784%200%200%200-31.0272-30.976h-232.448a31.0784%2031.0784%200%200%201-30.976-31.0272c0-65.024%2023.2448-127.0784%2066.6624-173.568%2027.8528-29.3888%2041.8304-68.1472%2041.8304-108.4416-1.536-80.5888-68.1984-148.7872-148.7872-151.8592a150.528%20150.528%200%200%200-113.152%2043.3664%20153.6%20153.6%200%200%200-48.0256%20111.616c0%2037.1712%2013.9776%2074.3424%2038.7584%20102.2464%2044.9536%2051.1488%2069.7344%20113.152%2069.7344%20176.64a31.0784%2031.0784%200%200%201-30.976%2031.0272h-232.448a31.0784%2031.0784%200%200%200-30.976%2030.976v123.9552z'%20fill='%23fff'%20p-id='8641'%3e%3c/path%3e%3c/svg%3e"},[l.COPY_TASK_NODE]:{color:"#3296fb",svg:"data:image/svg+xml,%3csvg%20t='1729649333541'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='1644'%20width='200'%20height='200'%3e%3cpath%20d='M647.888%20893.84L491.904%20571.52l393.888-393.888-237.904%20716.208zM872.32%20123.232L459.872%20535.68%20134.96%20380.88%20872.32%20123.232z%20m90.72-68.32a23.968%2023.968%200%200%200-24.784-5.568L64.08%20354.816a23.984%2023.984%200%200%200-2.4%2044.32l381.392%20181.728%20187.36%20387.088a24.048%2024.048%200%200%200%2023.152%2013.504%2024.032%2024.032%200%200%200%2021.232-16.4L968.96%2079.552c2.88-8.672%200.592-18.24-5.92-24.64z'%20fill='%23fff'%20p-id='1645'%3e%3c/path%3e%3c/svg%3e"},[l.CONDITION_NODE]:{color:"#14bb83",svg:"data:image/svg+xml,%3csvg%20t='1729585232424'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='1602'%20width='200'%20height='200'%3e%3cpath%20d='M925.5%20898.9H804.9c-19%200-34.5-15.4-34.5-34.4V761.3c0-19%2015.4-34.4%2034.5-34.4h34.5V572.2c0-19-15.4-34.4-34.5-34.4H529.2V727h34.5c19%200%2034.5%2015.4%2034.5%2034.4v103.2c0%2019-15.4%2034.4-34.5%2034.4H443.1c-19%200-34.5-15.4-34.5-34.4V761.3c0-19%2015.4-34.4%2034.5-34.4h34.5V537.8H219.1c-19%200-34.5%2015.4-34.5%2034.4V727h34.5c19%200%2034.5%2015.4%2034.5%2034.4v103.2c0%2019-15.4%2034.4-34.5%2034.4H98.5c-19%200-34.5-15.4-34.5-34.4V761.3c0-19%2015.4-34.4%2034.5-34.4H133V555c0-38%2030.9-68.8%2068.9-68.8h275.7V297.1h-34.5c-19%200-34.5-15.4-34.5-34.4V159.5c0-19%2015.4-34.4%2034.5-34.4h120.6c19%200%2034.5%2015.4%2034.5%2034.4v103.2c0%2019-15.4%2034.4-34.5%2034.4h-34.5v189.2h292.9c38.1%200%2068.9%2030.8%2068.9%2068.8v172h34.5c19%200%2034.5%2015.4%2034.5%2034.4v103.2c0%2018.8-15.4%2034.2-34.5%2034.2z%20m0%200'%20p-id='1603'%20fill='%23fff'%3e%3c/path%3e%3c/svg%3e"},[l.PARALLEL_BRANCH_NODE]:{color:"#14bb83",svg:"data:image/svg+xml,%3csvg%20t='1729585239190'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='1755'%20width='200'%20height='200'%3e%3cpath%20d='M901.489435%20536.822664v-0.931601l-1.001722-198.240726c-0.100172-19.162936-9.21584-37.474409-25.043042-50.246361-14.024104-11.349507-32.265456-17.60025-51.348255-17.610268l-618.062295-0.18031c-19.142902%200-37.424323%206.280795-51.478478%2017.690405-15.827203%2012.842072-24.902802%2031.2437-24.892785%2050.486775v196.798247A114.987635%20114.987635%200%201%200%20195.295664%20536.922836V338.782282c1.15198-1.252152%204.808264-3.596181%2010.768509-3.596181l276.725622%200.090155v199.753326a114.987635%20114.987635%200%201%200%2065.612772%201.412428V335.326342l275.693849%200.080138c6.01033%200%209.626546%202.344029%2010.768508%203.596181l1.001722%20195.70637a114.987635%20114.987635%200%201%200%2065.592737%202.113633zM214.979496%20645.910158a56.437001%2056.437001%200%201%201-56.437001-56.437001%2056.507122%2056.507122%200%200%201%2056.437001%2056.437001z%20m354.689623%200a56.437001%2056.437001%200%201%201-56.437001-56.437001%2056.507122%2056.507122%200%200%201%2056.437001%2056.437001z%20m295.507904%2056.437001a56.437001%2056.437001%200%201%201%2056.437001-56.437001%2056.507122%2056.507122%200%200%201-56.457035%2056.437001z'%20p-id='1756'%20fill='%23fff'%3e%3c/path%3e%3c/svg%3e"}},X=[-1,0,1],O=(i,o)=>{var _;return i==Q.NOT_START||o===l.START_USER_NODE||o===l.USER_TASK_NODE||o===l.END_EVENT_NODE?(_=N[i])==null?void 0:_.icon:void 0},R=i=>{var o;return(o=N[i])==null?void 0:o.color},V=K(),Z=G,E=K({}),e2=(i,o)=>{E.value[i]=o||[],Z("selectUserConfirm",i,o)};return(i,o)=>{const _=p2,s2=f2,a2=v2,v=b2,C=m2,c2=k2,o2=u2,l2=w2,i2=t2;return s(),c(u,null,[x(l2,{class:"pt-20px"},{default:d(()=>[(s(!0),c(u,null,T(i.activityNodes,(a,z)=>(s(),r(o2,{key:z,size:"large",icon:O(a.status,a.nodeType),color:R(a.status)},{dot:d(()=>{var e;return[w("div",_2,[w("img",{class:"w-full h-full",src:(t=a.nodeType,(e=W[t])==null?void 0:e.svg),alt:""},null,8,T2),i.showStatusIcon?(s(),c("div",{key:0,class:"position-absolute top-17px left-17px rounded-full flex items-center p-1px border-2 border-white border-solid",style:S({backgroundColor:R(a.status)})},[x(_,{size:11,color:"#fff"},{default:d(()=>[(s(),r(n2(O(a.status,a.nodeType))))]),_:2},1024)],4)):h("",!0)])];var t}),default:d(()=>{return[w("div",{class:"flex flex-col items-start gap2",id:`activity-task-${a.id}-${z}`},[w("div",z2,[w("div",S2,n(a.name),1),a.status!==p(Q).NOT_START?(s(),c("div",U2,n((t=a,t.nodeType===l.START_USER_NODE&&t.startTime?`${U(t.startTime)}`:t.endTime?`${U(t.endTime)}`:t.startTime?`${U(t.startTime)}`:void 0)),1)):h("",!0)]),p(j)(a.tasks)&&p(j)(a.candidateUsers)&&p(y2).START_USER_SELECT===a.candidateStrategy?(s(),c("div",N2,[x(a2,{content:"\u6DFB\u52A0\u7528\u6237",placement:"left"},{default:d(()=>[x(s2,{class:"!px-6px",onClick:e=>{return m=a.id,g=p(E)[a.id],void V.value.open(m,g);var m,g}},{default:d(()=>o[0]||(o[0]=[w("img",{class:"w-18px text-#ccc",src:"data:image/svg+xml,%3csvg%20t='1731390087280'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='4297'%20width='200'%20height='200'%3e%3cpath%20d='M639.9%20541.7c76.4-44.2%20127.9-126.8%20127.9-221.5C767.7%20179%20653.2%2064.5%20512%2064.5S256.3%20179%20256.3%20320.2c0%2089.6%2046.1%20168.4%20115.8%20214.1C193.5%20593%2064.5%20761.2%2064.5%20959.5h63.9c0-211.5%20172.1-383.6%20383.6-383.6%2044.9%200%2087.8%208.1%20127.9%2022.4v-56.6zM320.2%20320.2c0-105.8%2086-191.8%20191.8-191.8s191.8%2086%20191.8%20191.8S617.7%20512%20512%20512s-191.8-86-191.8-191.8zM831.6%20767.7V639.9h-63.9v127.8H639.9v63.9h127.8v127.9h63.9V831.6h127.9v-63.9z'%20fill='%235f6266'%20p-id='4298'%3e%3c/path%3e%3c/svg%3e",alt:""},null,-1)])),_:2},1032,["onClick"])]),_:2},1024),(s(!0),c(u,null,T(p(E)[a.id],(e,m)=>(s(),c("div",{key:m,class:"bg-gray-100 h-35px rounded-3xl flex items-center pr-8px dark:color-gray-600 position-relative"},[e.avatar?(s(),r(v,{key:0,class:"!m-5px",size:28,src:e.avatar},null,8,["src"])):(s(),r(v,{key:1,class:"!m-5px",size:28},{default:d(()=>[f(n(e.nickname.substring(0,1)),1)]),_:2},1024)),f(" "+n(e.nickname),1)]))),128))])):(s(),c("div",O2,[(s(!0),c(u,null,T(a.tasks,(e,m)=>{var g,k,D,A,F,H,M,B,I,L,P,$;return s(),c("div",{key:m,class:"flex flex-col pr-2 gap2"},[e.assigneeUser||e.ownerUser?(s(),c("div",R2,[w("div",V2,[(g=e.assigneeUser)!=null&&g.avatar||(k=e.assigneeUser)!=null&&k.nickname?(s(),c(u,{key:0},[(D=e.assigneeUser)!=null&&D.avatar?(s(),r(v,{key:0,class:"!m-5px",size:28,src:(A=e.assigneeUser)==null?void 0:A.avatar},null,8,["src"])):(s(),r(v,{key:1,class:"!m-5px",size:28},{default:d(()=>{var b;return[f(n((b=e.assigneeUser)==null?void 0:b.nickname.substring(0,1)),1)]}),_:2},1024)),f(" "+n((F=e.assigneeUser)==null?void 0:F.nickname),1)],64)):(H=e.ownerUser)!=null&&H.avatar||(M=e.ownerUser)!=null&&M.nickname?(s(),c(u,{key:1},[(B=e.ownerUser)!=null&&B.avatar?(s(),r(v,{key:0,class:"!m-5px",size:28,src:(I=e.ownerUser)==null?void 0:I.avatar},null,8,["src"])):(s(),r(v,{key:1,class:"!m-5px",size:28},{default:d(()=>{var b;return[f(n((b=e.ownerUser)==null?void 0:b.nickname.substring(0,1)),1)]}),_:2},1024)),f(" "+n((L=e.ownerUser)==null?void 0:L.nickname),1)],64)):h("",!0),i.showStatusIcon&&X.includes(e.status)?(s(),c("div",{key:2,class:"position-absolute top-19px left-23px rounded-full flex items-center p-1px border-2 border-white border-solid",style:S({backgroundColor:(P=y[e.status])==null?void 0:P.color})},[x(C,{size:11,icon:($=y[e.status])==null?void 0:$.icon,color:"#FFFFFF"},null,8,["icon"])],4)):h("",!0)])])):h("",!0),(s(),r(d2,{defer:"",to:`#activity-task-${a.id}-${z}`},[e.reason&&[p(l).USER_TASK_NODE,p(l).END_EVENT_NODE].includes(a.nodeType)?(s(),c("div",C2," \u5BA1\u6279\u610F\u89C1\uFF1A"+n(e.reason),1)):h("",!0),e.signPicUrl&&a.nodeType===p(l).USER_TASK_NODE?(s(),c("div",D2,[o[1]||(o[1]=f(" \u7B7E\u540D\uFF1A ")),x(c2,{class:"w-90px h-40px ml-5px",src:e.signPicUrl,"preview-src-list":[e.signPicUrl]},null,8,["src","preview-src-list"])])):h("",!0)],8,["to"]))])}),128)),(s(!0),c(u,null,T(a.candidateUsers,(e,m)=>{var g,k;return s(),c("div",{key:m,class:"bg-gray-100 h-35px rounded-3xl flex items-center pr-8px dark:color-gray-600 position-relative"},[e.avatar?(s(),r(v,{key:0,class:"!m-5px",size:28,src:e.avatar},null,8,["src"])):(s(),r(v,{key:1,class:"!m-5px",size:28},{default:d(()=>[f(n(e.nickname.substring(0,1)),1)]),_:2},1024)),f(" "+n(e.nickname)+" ",1),i.showStatusIcon?(s(),c("div",{key:2,class:"position-absolute top-20px left-24px rounded-full flex items-center p-1px border-2 border-white border-solid",style:S({backgroundColor:(g=y[-1])==null?void 0:g.color})},[x(C,{size:11,icon:(k=y[-1])==null?void 0:k.icon,color:"#FFFFFF"},null,8,["icon"])],4)):h("",!0)])}),128))]))],8,E2)];var t}),_:2},1032,["icon","color"]))),128))]),_:1}),x(i2,{ref_key:"userSelectFormRef",ref:V,onConfirm:e2},null,512)],64)}}});export{A2 as _};
