import{d as I,dt as U,r as h,du as B,aw as M,o as r,q as d,w as o,f as t,c as n,p as x,x as E,t as F,u as s,O as L,D as O,F as _,a3 as i,g as v,ai as j,aj as A,C as R,A as Y,B as H,T as J,H as z,aY as G,al as K,J as N}from"./index-DPENBzsb.js";import{g as Q}from"./index-BOzeB1Pk.js";import{b as S}from"./formCreate-BQ5MeUYD.js";const W={key:3,class:"mt-20px"},X=I({__name:"FormDesign",props:U({formList:{type:Array,required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(c,{expose:w}){const V=h(),a=B(c,"modelValue"),u=h({formData:{},rule:[],option:{submitBtn:!1,resetBtn:!1,formData:{}}});M(()=>a.value.formId,async m=>{if(m&&a.value.formType===10){const l=await Q(m);S(u.value,l.conf,l.fields),u.value.rule.forEach(p=>{p.props={...p.props,disabled:!0}})}else u.value.rule=[]},{immediate:!0});const C={formType:[{required:!0,message:"\u8868\u5355\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],formId:[{required:!0,message:"\u6D41\u7A0B\u8868\u5355\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],formCustomCreatePath:[{required:!0,message:"\u8868\u5355\u63D0\u4EA4\u8DEF\u7531\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],formCustomViewPath:[{required:!0,message:"\u8868\u5355\u67E5\u770B\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]};return w({validate:async()=>{var m;await((m=V.value)==null?void 0:m.validate())}}),(m,l)=>{const p=j,T=A,f=R,P=Y,q=H,y=J,b=z,g=G,D=K("form-create"),k=N;return r(),d(k,{ref_key:"formRef",ref:V,model:a.value,rules:C,"label-width":"120px",class:"mt-20px"},{default:o(()=>[t(f,{label:"\u8868\u5355\u7C7B\u578B",prop:"formType",class:"mb-20px"},{default:o(()=>[t(T,{modelValue:a.value.formType,"onUpdate:modelValue":l[0]||(l[0]=e=>a.value.formType=e)},{default:o(()=>[(r(!0),n(_,null,x(s(L)(s(O).BPM_MODEL_FORM_TYPE),e=>(r(),d(p,{key:e.value,value:e.value},{default:o(()=>[E(F(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a.value.formType===10?(r(),d(f,{key:0,label:"\u6D41\u7A0B\u8868\u5355",prop:"formId"},{default:o(()=>[t(q,{modelValue:a.value.formId,"onUpdate:modelValue":l[1]||(l[1]=e=>a.value.formId=e),clearable:"",style:{width:"100%"}},{default:o(()=>[(r(!0),n(_,null,x(c.formList,e=>(r(),d(P,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):i("",!0),a.value.formType===20?(r(),d(f,{key:1,label:"\u8868\u5355\u63D0\u4EA4\u8DEF\u7531",prop:"formCustomCreatePath"},{default:o(()=>[t(y,{modelValue:a.value.formCustomCreatePath,"onUpdate:modelValue":l[2]||(l[2]=e=>a.value.formCustomCreatePath=e),placeholder:"\u8BF7\u8F93\u5165\u8868\u5355\u63D0\u4EA4\u8DEF\u7531",style:{width:"330px"}},null,8,["modelValue"]),t(g,{class:"item",content:"\u81EA\u5B9A\u4E49\u8868\u5355\u7684\u63D0\u4EA4\u8DEF\u5F84\uFF0C\u4F7F\u7528 Vue \u7684\u8DEF\u7531\u5730\u5740\uFF0C\u4F8B\u5982\u8BF4\uFF1Abpm/oa/leave/create.vue",effect:"light",placement:"top"},{default:o(()=>[t(b,{icon:"ep:question",class:"ml-5px"})]),_:1})]),_:1})):i("",!0),a.value.formType===20?(r(),d(f,{key:2,label:"\u8868\u5355\u67E5\u770B\u5730\u5740",prop:"formCustomViewPath"},{default:o(()=>[t(y,{modelValue:a.value.formCustomViewPath,"onUpdate:modelValue":l[3]||(l[3]=e=>a.value.formCustomViewPath=e),placeholder:"\u8BF7\u8F93\u5165\u8868\u5355\u67E5\u770B\u7684\u7EC4\u4EF6\u5730\u5740",style:{width:"330px"}},null,8,["modelValue"]),t(g,{class:"item",content:"\u81EA\u5B9A\u4E49\u8868\u5355\u7684\u67E5\u770B\u7EC4\u4EF6\u5730\u5740\uFF0C\u4F7F\u7528 Vue \u7684\u7EC4\u4EF6\u5730\u5740\uFF0C\u4F8B\u5982\u8BF4\uFF1Abpm/oa/leave/detail.vue",effect:"light",placement:"top"},{default:o(()=>[t(b,{icon:"ep:question",class:"ml-5px"})]),_:1})]),_:1})):i("",!0),a.value.formType===10&&a.value.formId&&s(u).rule.length>0?(r(),n("div",W,[l[5]||(l[5]=v("div",{class:"flex items-center mb-15px"},[v("div",{class:"h-15px w-4px bg-[#1890ff] mr-10px"}),v("span",{class:"text-15px font-bold"},"\u8868\u5355\u9884\u89C8")],-1)),t(D,{modelValue:s(u).formData,"onUpdate:modelValue":l[4]||(l[4]=e=>s(u).formData=e),rule:s(u).rule,option:s(u).option},null,8,["modelValue","rule","option"])])):i("",!0)]),_:1},8,["model"])}}});export{X as _};
