import{_ as H}from"./index-NekN2je6.js";import{d as J,dt as Z,r as b,du as K,aw as Q,o as u,c as p,f as l,w as s,g as z,F as c,p as g,q as n,x as m,t as v,u as f,O as W,D as B,v as X,a3 as $,T as ee,H as ae,aY as le,C as re,A as se,B as ue,bZ as te,ai as de,aj as ie,I as oe,J as pe,_ as me}from"./index-DPENBzsb.js";import{E as ne}from"./el-avatar-BjIHlmF4.js";import"./Dialog.vue_vue_type_style_index_0_lang-ncKgepny.js";import"./ContentWrap.vue_vue_type_script_setup_true_lang-CnIlr_-B.js";import"./tree-Cts6wVCK.js";import"./index-BUzABQZW.js";import"./index-Co9HWb9O.js";const ce={class:"flex items-center"},ve={key:0,class:"mt-2 flex flex-wrap gap-2"},fe={class:"flex flex-wrap gap-2"},be=me(J({__name:"BasicInfo",props:Z({categoryList:{type:Array,required:!0},userList:{type:Array,required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(k,{expose:E}){const w=k,C=b(),y=b([]),x=b([]),V=b(),U=b("start"),N={name:[{required:!0,message:"\u6D41\u7A0B\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],key:[{required:!0,message:"\u6D41\u7A0B\u6807\u8BC6\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],category:[{required:!0,message:"\u6D41\u7A0B\u5206\u7C7B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],type:[{required:!0,message:"\u662F\u5426\u53EF\u89C1\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],visible:[{required:!0,message:"\u662F\u5426\u53EF\u89C1\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],managerUserIds:[{required:!0,message:"\u6D41\u7A0B\u7BA1\u7406\u5458\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]},a=K(k,"modelValue");Q(()=>a.value,t=>{var r,d;(r=t.startUserIds)!=null&&r.length?y.value=w.userList.filter(i=>t.startUserIds.includes(i.id)):y.value=[],(d=t.managerUserIds)!=null&&d.length?x.value=w.userList.filter(i=>t.managerUserIds.includes(i.id)):x.value=[]},{immediate:!0});const R=()=>{U.value="start",V.value.open(0,y.value)},F=()=>{U.value="manager",V.value.open(0,x.value)},M=(t,r)=>{U.value==="start"?a.value={...a.value,startUserIds:r.map(d=>d.id)}:a.value={...a.value,managerUserIds:r.map(d=>d.id)}},D=t=>{t!==1&&(a.value={...a.value,startUserIds:[]})};return E({validate:async()=>{var t;await((t=C.value)==null?void 0:t.validate())}}),(t,r)=>{const d=ee,i=ae,P=le,o=re,I=se,A=ue,S=te,L=de,T=ie,_=ne,O=oe,Y=pe,j=H;return u(),p(c,null,[l(Y,{ref_key:"formRef",ref:C,model:a.value,rules:N,"label-width":"120px",class:"mt-20px"},{default:s(()=>[l(o,{label:"\u6D41\u7A0B\u6807\u8BC6",prop:"key",class:"mb-20px"},{default:s(()=>[z("div",ce,[l(d,{class:"!w-440px",modelValue:a.value.key,"onUpdate:modelValue":r[0]||(r[0]=e=>a.value.key=e),disabled:!!a.value.id,placeholder:"\u8BF7\u8F93\u5165\u6D41\u7A0B\u6807\u8BC6\uFF0C\u4EE5\u5B57\u6BCD\u6216\u4E0B\u5212\u7EBF\u5F00\u5934"},null,8,["modelValue","disabled"]),l(P,{class:"item",content:a.value.id?"\u6D41\u7A0B\u6807\u8BC6\u4E0D\u53EF\u4FEE\u6539\uFF01":"\u65B0\u5EFA\u540E\uFF0C\u6D41\u7A0B\u6807\u8BC6\u4E0D\u53EF\u4FEE\u6539\uFF01",effect:"light",placement:"top"},{default:s(()=>[l(i,{icon:"ep:question-filled",class:"ml-5px"})]),_:1},8,["content"])])]),_:1}),l(o,{label:"\u6D41\u7A0B\u540D\u79F0",prop:"name",class:"mb-20px"},{default:s(()=>[l(d,{modelValue:a.value.name,"onUpdate:modelValue":r[1]||(r[1]=e=>a.value.name=e),disabled:!!a.value.id,clearable:"",placeholder:"\u8BF7\u8F93\u5165\u6D41\u7A0B\u540D\u79F0"},null,8,["modelValue","disabled"])]),_:1}),l(o,{label:"\u6D41\u7A0B\u5206\u7C7B",prop:"category",class:"mb-20px"},{default:s(()=>[l(A,{class:"!w-full",modelValue:a.value.category,"onUpdate:modelValue":r[2]||(r[2]=e=>a.value.category=e),clearable:"",placeholder:"\u8BF7\u9009\u62E9\u6D41\u7A0B\u5206\u7C7B"},{default:s(()=>[(u(!0),p(c,null,g(k.categoryList,e=>(u(),n(I,{key:e.code,label:e.name,value:e.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(o,{label:"\u6D41\u7A0B\u56FE\u6807",class:"mb-20px"},{default:s(()=>[l(S,{modelValue:a.value.icon,"onUpdate:modelValue":r[3]||(r[3]=e=>a.value.icon=e),limit:1,height:"64px",width:"64px"},null,8,["modelValue"])]),_:1}),l(o,{label:"\u6D41\u7A0B\u63CF\u8FF0",prop:"description",class:"mb-20px"},{default:s(()=>[l(d,{modelValue:a.value.description,"onUpdate:modelValue":r[4]||(r[4]=e=>a.value.description=e),clearable:"",type:"textarea"},null,8,["modelValue"])]),_:1}),l(o,{label:"\u6D41\u7A0B\u7C7B\u578B",prop:"type",class:"mb-20px"},{default:s(()=>[l(T,{modelValue:a.value.type,"onUpdate:modelValue":r[5]||(r[5]=e=>a.value.type=e)},{default:s(()=>[(u(!0),p(c,null,g(f(W)(f(B).BPM_MODEL_TYPE),e=>(u(),n(L,{key:e.value,value:e.value},{default:s(()=>[m(v(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(o,{label:"\u662F\u5426\u53EF\u89C1",prop:"visible",class:"mb-20px"},{default:s(()=>[l(T,{modelValue:a.value.visible,"onUpdate:modelValue":r[6]||(r[6]=e=>a.value.visible=e)},{default:s(()=>[(u(!0),p(c,null,g(f(X)(f(B).INFRA_BOOLEAN_STRING),e=>(u(),n(L,{key:e.value,value:e.value},{default:s(()=>[m(v(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(o,{label:"\u8C01\u53EF\u4EE5\u53D1\u8D77",prop:"startUserType",class:"mb-20px"},{default:s(()=>[l(A,{modelValue:a.value.startUserType,"onUpdate:modelValue":r[7]||(r[7]=e=>a.value.startUserType=e),placeholder:"\u8BF7\u9009\u62E9\u8C01\u53EF\u4EE5\u53D1\u8D77",onChange:D},{default:s(()=>[l(I,{label:"\u5168\u5458",value:0}),l(I,{label:"\u6307\u5B9A\u4EBA\u5458",value:1})]),_:1},8,["modelValue"]),a.value.startUserType===1?(u(),p("div",ve,[(u(!0),p(c,null,g(f(y),e=>(u(),p("div",{key:e.id,class:"bg-gray-100 h-35px rounded-3xl flex items-center pr-8px dark:color-gray-600 position-relative"},[e.avatar?(u(),n(_,{key:0,class:"!m-5px",size:28,src:e.avatar},null,8,["src"])):(u(),n(_,{key:1,class:"!m-5px",size:28},{default:s(()=>[m(v(e.nickname.substring(0,1)),1)]),_:2},1024)),m(" "+v(e.nickname)+" ",1),l(i,{icon:"ep:close",class:"ml-2 cursor-pointer hover:text-red-500",onClick:G=>(h=>{a.value={...a.value,startUserIds:a.value.startUserIds.filter(q=>q!==h.id)}})(e)},null,8,["onClick"])]))),128)),l(O,{type:"primary",link:"",onClick:R},{default:s(()=>[l(i,{icon:"ep:plus"}),r[8]||(r[8]=m(" \u9009\u62E9\u4EBA\u5458 "))]),_:1})])):$("",!0)]),_:1}),l(o,{label:"\u6D41\u7A0B\u7BA1\u7406\u5458",prop:"managerUserIds",class:"mb-20px"},{default:s(()=>[z("div",fe,[(u(!0),p(c,null,g(f(x),e=>(u(),p("div",{key:e.id,class:"bg-gray-100 h-35px rounded-3xl flex items-center pr-8px dark:color-gray-600 position-relative"},[e.avatar?(u(),n(_,{key:0,class:"!m-5px",size:28,src:e.avatar},null,8,["src"])):(u(),n(_,{key:1,class:"!m-5px",size:28},{default:s(()=>[m(v(e.nickname.substring(0,1)),1)]),_:2},1024)),m(" "+v(e.nickname)+" ",1),l(i,{icon:"ep:close",class:"ml-2 cursor-pointer hover:text-red-500",onClick:G=>(h=>{a.value={...a.value,managerUserIds:a.value.managerUserIds.filter(q=>q!==h.id)}})(e)},null,8,["onClick"])]))),128)),l(O,{type:"primary",link:"",onClick:F},{default:s(()=>[l(i,{icon:"ep:plus"}),r[9]||(r[9]=m("\u9009\u62E9\u4EBA\u5458 "))]),_:1})])]),_:1})]),_:1},8,["model"]),l(j,{ref_key:"userSelectFormRef",ref:V,onConfirm:M},null,512)],64)}}}),[["__scopeId","data-v-107165bc"]]);export{be as default};
