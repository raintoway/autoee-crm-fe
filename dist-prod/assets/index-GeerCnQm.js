import{d as z,z as H,h as J,r as u,e as L,n as M,U as N,o as s,c as j,f as e,w as l,u as r,N as A,x as n,y as m,q as f,F as B,T as D,C as E,H as W,I as X,J as G,K as O,L as Q,M as Y}from"./index-DPENBzsb.js";import{_ as Z}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CnIlr_-B.js";import{_ as $}from"./index-CbaPuDB3.js";import{d as ee}from"./formatTime-C7TQtsxQ.js";import{g as ae,d as le}from"./index-BWhMN_YI.js";import{_ as re}from"./ProductCategoryForm.vue_vue_type_script_setup_true_lang-CHVYHMkw.js";import{h as te}from"./tree-Cts6wVCK.js";import"./Dialog.vue_vue_type_style_index_0_lang-ncKgepny.js";const oe=z({name:"CrmProductCategory",__name:"index",setup(se){const x=H(),{t:I}=J(),y=u(!0),C=u([]),c=L({name:null}),g=u(),d=async()=>{y.value=!0;try{const i=await ae(c);C.value=te(i,"id","parentId")}finally{y.value=!1}},_=()=>{d()},K=()=>{g.value.resetFields(),_()},h=u(),b=(i,a)=>{h.value.open(i,a)};return M(()=>{d()}),(i,a)=>{const P=$,V=D,v=E,k=W,t=X,q=G,F=Z,p=O,R=Q,w=N("hasPermi"),S=Y;return s(),j(B,null,[e(P,{title:"\u3010\u4EA7\u54C1\u3011\u4EA7\u54C1\u7BA1\u7406\u3001\u4EA7\u54C1\u5206\u7C7B",url:"https://doc.iocoder.cn/crm/product/"}),e(F,null,{default:l(()=>[e(q,{class:"-mb-15px",model:r(c),ref_key:"queryFormRef",ref:g,inline:!0,"label-width":"68px"},{default:l(()=>[e(v,{label:"\u540D\u79F0",prop:"name"},{default:l(()=>[e(V,{modelValue:r(c).name,"onUpdate:modelValue":a[0]||(a[0]=o=>r(c).name=o),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",clearable:"",onKeyup:A(_,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(v,null,{default:l(()=>[e(t,{onClick:_},{default:l(()=>[e(k,{icon:"ep:search",class:"mr-5px"}),a[2]||(a[2]=n(" \u641C\u7D22"))]),_:1}),e(t,{onClick:K},{default:l(()=>[e(k,{icon:"ep:refresh",class:"mr-5px"}),a[3]||(a[3]=n(" \u91CD\u7F6E"))]),_:1}),m((s(),f(t,{type:"primary",plain:"",onClick:a[1]||(a[1]=o=>b("create"))},{default:l(()=>[e(k,{icon:"ep:plus",class:"mr-5px"}),a[4]||(a[4]=n(" \u65B0\u589E "))]),_:1})),[[w,["crm:product-category:create"]]])]),_:1})]),_:1},8,["model"])]),_:1}),e(F,null,{default:l(()=>[m((s(),f(R,{data:r(C),"row-key":"id","default-expand-all":""},{default:l(()=>[e(p,{label:"\u5206\u7C7B\u7F16\u53F7",align:"center",prop:"id"}),e(p,{label:"\u5206\u7C7B\u540D\u79F0",align:"center",prop:"name"}),e(p,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",formatter:r(ee),width:"180px"},null,8,["formatter"]),e(p,{label:"\u64CD\u4F5C",align:"center"},{default:l(o=>[m((s(),f(t,{link:"",type:"primary",onClick:T=>b("update",o.row.id)},{default:l(()=>a[5]||(a[5]=[n(" \u7F16\u8F91 ")])),_:2},1032,["onClick"])),[[w,["crm:product-category:update"]]]),m((s(),f(t,{link:"",type:"danger",onClick:T=>(async U=>{try{await x.delConfirm(),await le(U),x.success(I("common.delSuccess")),await d()}catch{}})(o.row.id)},{default:l(()=>a[6]||(a[6]=[n(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[w,["crm:product-category:delete"]]])]),_:1})]),_:1},8,["data"])),[[S,r(y)]])]),_:1}),e(re,{ref_key:"formRef",ref:h,onSuccess:d},null,512)],64)}}});export{oe as default};
