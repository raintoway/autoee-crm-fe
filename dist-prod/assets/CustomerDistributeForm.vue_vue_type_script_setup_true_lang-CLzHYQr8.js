import{d as q,r as d,e as z,o as n,q as v,w as r,f as m,x as p,u as s,y as A,c as B,p as D,F as J,k as M,h as j,z as R,A as E,B as G,C as H,J as K,I as L,M as N}from"./index-DPENBzsb.js";import{_ as O}from"./Dialog.vue_vue_type_style_index_0_lang-ncKgepny.js";import{d as P}from"./index-OU-fIsLR.js";import{g as Q}from"./index-Co9HWb9O.js";const S=q({__name:"CustomerDistributeForm",emits:["success"],setup(T,{expose:w,emit:_}){j();const y=R(),o=d(!1),t=d(!1),f=d([]),l=d({id:void 0,ownerUserId:void 0}),U=z({ownerUserId:[{required:!0,message:"\u8D1F\u8D23\u4EBA\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),i=d();w({open:async u=>{o.value=!0,k(),l.value.id=u,f.value=await Q()}});const b=_,I=async()=>{if(i&&await i.value.validate()){t.value=!0;try{await P([l.value.id],l.value.ownerUserId),y.success("\u5206\u914D\u5BA2\u6237\u6210\u529F"),o.value=!1,b("success")}finally{t.value=!1}}},k=()=>{var u;l.value={id:void 0,ownerUserId:void 0},(u=i.value)==null||u.resetFields()};return(u,e)=>{const V=E,g=G,x=H,C=K,c=L,F=O,h=N;return n(),v(F,{modelValue:s(o),"onUpdate:modelValue":e[2]||(e[2]=a=>M(o)?o.value=a:null),title:"\u5206\u914D\u5BA2\u6237"},{footer:r(()=>[m(c,{disabled:s(t),type:"primary",onClick:I},{default:r(()=>e[3]||(e[3]=[p("\u786E \u5B9A")])),_:1},8,["disabled"]),m(c,{onClick:e[1]||(e[1]=a=>o.value=!1)},{default:r(()=>e[4]||(e[4]=[p("\u53D6 \u6D88")])),_:1})]),default:r(()=>[A((n(),v(C,{ref_key:"formRef",ref:i,model:s(l),rules:s(U),"label-width":"100px"},{default:r(()=>[m(x,{label:"\u8D1F\u8D23\u4EBA",prop:"ownerUserId"},{default:r(()=>[m(g,{modelValue:s(l).ownerUserId,"onUpdate:modelValue":e[0]||(e[0]=a=>s(l).ownerUserId=a),class:"w-1/1"},{default:r(()=>[(n(!0),B(J,null,D(s(f),a=>(n(),v(V,{key:a.id,label:a.nickname,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[h,s(t)]])]),_:1},8,["modelValue"])}}});export{S as _};
