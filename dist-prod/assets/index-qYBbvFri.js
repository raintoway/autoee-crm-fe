import{a$ as g,d as S,z as J,h as M,r as y,e as Q,n as R,U as $,o as i,c as p,f as l,w as s,y as x,q as E,u as o,g as A,x as u,a3 as V,F as B,I as G,ai as T,aj as W,C as H,bQ as K,j as L,J as N,M as O}from"./index-DPENBzsb.js";import{_ as X}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CnIlr_-B.js";import{_ as Y}from"./index-CbaPuDB3.js";import{C as Z}from"./CardTitle-BD6A_h9B.js";const ee={class:"flex items-center justify-between"},ae={key:0},le={key:0},oe=S({name:"CrmCustomerPoolConfig",__name:"index",setup(se){const D=J(),{t:w}=M(),d=y(!1),a=y({enabled:!1,contactExpireDays:void 0,dealExpireDays:void 0,notifyEnabled:!1,notifyDays:void 0}),h=Q({enabled:[{required:!0,message:"\u662F\u5426\u542F\u7528\u5BA2\u6237\u516C\u6D77\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),c=y(),v=async()=>{try{d.value=!0;const n=await(async()=>await g.get({url:"/crm/customer-pool-config/get"}))();if(n===null)return;a.value=n}finally{d.value=!1}},C=async()=>{if(c&&await c.value.validate()){d.value=!0;try{const n=a.value;await(async e=>await g.put({url:"/crm/customer-pool-config/save",data:e}))(n),D.success(w("common.updateSuccess")),await v(),d.value=!1}finally{d.value=!1}}},U=()=>{a.value.enabled||(a.value.contactExpireDays=void 0,a.value.dealExpireDays=void 0,a.value.notifyEnabled=!1,a.value.notifyDays=void 0)},z=()=>{a.value.notifyEnabled||(a.value.notifyDays=void 0)};return R(()=>{v()}),(n,e)=>{const b=Y,k=G,r=T,_=W,m=H,f=K,j=L,F=N,q=X,I=$("hasPermi"),P=O;return i(),p(B,null,[l(b,{title:"\u3010\u5BA2\u6237\u3011\u5BA2\u6237\u7BA1\u7406\u3001\u516C\u6D77\u5BA2\u6237",url:"https://doc.iocoder.cn/crm/customer/"}),l(b,{title:"\u3010\u901A\u7528\u3011\u6570\u636E\u6743\u9650",url:"https://doc.iocoder.cn/crm/permission/"}),l(q,null,{default:s(()=>[x((i(),E(F,{ref_key:"formRef",ref:c,model:o(a),rules:o(h),"label-width":"160px"},{default:s(()=>[l(j,{shadow:"never"},{header:s(()=>[A("div",ee,[l(o(Z),{title:"\u5BA2\u6237\u516C\u6D77\u89C4\u5219\u8BBE\u7F6E"}),x((i(),E(k,{type:"primary",onClick:C},{default:s(()=>e[5]||(e[5]=[u(" \u4FDD\u5B58 ")])),_:1})),[[I,["crm:customer-pool-config:update"]]])])]),default:s(()=>[l(m,{label:"\u5BA2\u6237\u516C\u6D77\u89C4\u5219\u8BBE\u7F6E",prop:"enabled"},{default:s(()=>[l(_,{modelValue:o(a).enabled,"onUpdate:modelValue":e[0]||(e[0]=t=>o(a).enabled=t),onChange:U,class:"ml-4"},{default:s(()=>[l(r,{value:!1,size:"large"},{default:s(()=>e[6]||(e[6]=[u("\u4E0D\u542F\u7528")])),_:1}),l(r,{value:!0,size:"large"},{default:s(()=>e[7]||(e[7]=[u("\u542F\u7528")])),_:1})]),_:1},8,["modelValue"])]),_:1}),o(a).enabled?(i(),p("div",ae,[l(m,null,{default:s(()=>[l(f,{class:"mr-2",modelValue:o(a).contactExpireDays,"onUpdate:modelValue":e[1]||(e[1]=t=>o(a).contactExpireDays=t)},null,8,["modelValue"]),e[8]||(e[8]=u(" \u5929\u4E0D\u8DDF\u8FDB\u6216 ")),l(f,{class:"mx-2",modelValue:o(a).dealExpireDays,"onUpdate:modelValue":e[2]||(e[2]=t=>o(a).dealExpireDays=t)},null,8,["modelValue"]),e[9]||(e[9]=u(" \u5929\u672A\u6210\u4EA4 "))]),_:1}),l(m,{label:"\u63D0\u524D\u63D0\u9192\u8BBE\u7F6E",prop:"notifyEnabled"},{default:s(()=>[l(_,{modelValue:o(a).notifyEnabled,"onUpdate:modelValue":e[3]||(e[3]=t=>o(a).notifyEnabled=t),onChange:z,class:"ml-4"},{default:s(()=>[l(r,{value:!1,size:"large"},{default:s(()=>e[10]||(e[10]=[u("\u4E0D\u63D0\u9192")])),_:1}),l(r,{value:!0,size:"large"},{default:s(()=>e[11]||(e[11]=[u("\u63D0\u9192")])),_:1})]),_:1},8,["modelValue"])]),_:1}),o(a).notifyEnabled?(i(),p("div",le,[l(m,null,{default:s(()=>[e[12]||(e[12]=u(" \u63D0\u524D ")),l(f,{class:"mx-2",modelValue:o(a).notifyDays,"onUpdate:modelValue":e[4]||(e[4]=t=>o(a).notifyDays=t)},null,8,["modelValue"]),e[13]||(e[13]=u(" \u5929\u63D0\u9192 "))]),_:1})])):V("",!0)])):V("",!0)]),_:1})]),_:1},8,["model","rules"])),[[P,o(d)]])]),_:1})],64)}}});export{oe as default};
