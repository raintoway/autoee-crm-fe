import{a$ as v,d as R,z as q,h as J,r as d,e as M,n as P,U as Q,o as i,c as _,f as e,w as l,y as b,q as g,u as s,g as S,x as r,a3 as $,F as A,I as T,ai as W,aj as B,C as G,bQ as H,j as K,J as L,M as N}from"./index-DPENBzsb.js";import{_ as O}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CnIlr_-B.js";import{_ as X}from"./index-CbaPuDB3.js";import{C as Y}from"./CardTitle-BD6A_h9B.js";const Z={class:"flex items-center justify-between"},aa={key:0},ea=R({name:"CrmContractConfig",__name:"index",setup(ta){const w=q(),{t:h}=J(),n=d(!1),t=d({notifyEnabled:!1,notifyDays:void 0}),C=M({}),u=d(),f=async()=>{try{n.value=!0;const o=await(async()=>await v.get({url:"/crm/contract-config/get"}))();if(o===null)return;t.value=o}finally{n.value=!1}},x=async()=>{if(u&&await u.value.validate()){n.value=!0;try{const o=t.value;await(async a=>await v.put({url:"/crm/contract-config/save",data:a}))(o),w.success(h("common.updateSuccess")),await f(),n.value=!1}finally{n.value=!1}}},E=()=>{t.value.notifyEnabled||(t.value.notifyDays=void 0)};return P(()=>{f()}),(o,a)=>{const m=X,V=T,y=W,D=B,p=G,k=H,z=K,F=L,U=O,j=Q("hasPermi"),I=N;return i(),_(A,null,[e(m,{title:"\u3010\u5408\u540C\u3011\u5408\u540C\u7BA1\u7406\u3001\u5408\u540C\u63D0\u9192",url:"https://doc.iocoder.cn/crm/contract/"}),e(m,{title:"\u3010\u901A\u7528\u3011\u6570\u636E\u6743\u9650",url:"https://doc.iocoder.cn/crm/permission/"}),e(U,null,{default:l(()=>[b((i(),g(F,{ref_key:"formRef",ref:u,model:s(t),rules:s(C),"label-width":"160px"},{default:l(()=>[e(z,{shadow:"never"},{header:l(()=>[S("div",Z,[e(s(Y),{title:"\u5408\u540C\u914D\u7F6E\u8BBE\u7F6E"}),b((i(),g(V,{type:"primary",onClick:x},{default:l(()=>a[2]||(a[2]=[r(" \u4FDD\u5B58 ")])),_:1})),[[j,["crm:contract-config:update"]]])])]),default:l(()=>[e(p,{label:"\u63D0\u524D\u63D0\u9192\u8BBE\u7F6E",prop:"notifyEnabled"},{default:l(()=>[e(D,{modelValue:s(t).notifyEnabled,"onUpdate:modelValue":a[0]||(a[0]=c=>s(t).notifyEnabled=c),onChange:E,class:"ml-4"},{default:l(()=>[e(y,{value:!1,size:"large"},{default:l(()=>a[3]||(a[3]=[r("\u4E0D\u63D0\u9192")])),_:1}),e(y,{value:!0,size:"large"},{default:l(()=>a[4]||(a[4]=[r("\u63D0\u9192")])),_:1})]),_:1},8,["modelValue"])]),_:1}),s(t).notifyEnabled?(i(),_("div",aa,[e(p,null,{default:l(()=>[a[5]||(a[5]=r(" \u63D0\u524D ")),e(k,{class:"mx-2",modelValue:s(t).notifyDays,"onUpdate:modelValue":a[1]||(a[1]=c=>s(t).notifyDays=c)},null,8,["modelValue"]),a[6]||(a[6]=r(" \u5929\u63D0\u9192 "))]),_:1})])):$("",!0)]),_:1})]),_:1},8,["model","rules"])),[[I,s(n)]])]),_:1})],64)}}});export{ea as default};
