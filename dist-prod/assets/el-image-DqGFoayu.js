import{az as V,aA as S,c7 as X,aF as ee,d as q,bo as ae,aB as le,aU as se,a1 as n,dk as ie,dl as te,r as u,bg as p,bu as oe,aw as ne,n as re,o as r,c as d,aI as z,g as A,t as ce,u as a,W as E,F,aJ as M,a3 as y,q as ue,w as de,dm as ve,aD as fe,am as pe,dn as ye,aP as me,dp as ge,bf as P,dq as we,dr as be,aL as he}from"./index-DPENBzsb.js";const ke=V({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:S([String,Object])},previewSrcList:{type:S(Array),default:()=>X([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:S(String)}}),xe={load:t=>t instanceof Event,error:t=>t instanceof Event,switch:t=>ee(t),close:()=>!0,show:()=>!0},Se=q({name:"ElImage",inheritAttrs:!1}),ze=he(fe(q({...Se,props:ke,emits:xe,setup(t,{emit:v}){const l=t;let L="";const{t:T}=ae(),o=le("image"),_=se(),B=n(()=>ie(Object.entries(_).filter(([e])=>/^(data-|on[A-Z])/i.test(e)||["id","style"].includes(e)))),D=te({excludeListeners:!0,excludeKeys:n(()=>Object.keys(B.value))}),g=u(),f=u(!1),c=u(!0),w=u(!1),m=u(),i=u(),K=p&&"loading"in HTMLImageElement.prototype;let b,h;const R=n(()=>[o.e("inner"),k.value&&o.e("preview"),c.value&&o.is("loading")]),Y=n(()=>{const{fit:e}=l;return p&&e?{objectFit:e}:{}}),k=n(()=>{const{previewSrcList:e}=l;return oe(e)&&e.length>0}),H=n(()=>{const{previewSrcList:e,initialIndex:s}=l;let j=s;return s>e.length-1&&(j=0),j}),I=n(()=>l.loading!=="eager"&&(!K&&l.loading==="lazy"||l.lazy)),x=()=>{p&&(c.value=!0,f.value=!1,g.value=l.src)};function J(e){c.value=!1,f.value=!1,v("load",e)}function U(e){c.value=!1,f.value=!0,v("error",e)}function O(){we(m.value,i.value)&&(x(),$())}const C=be(O,200,!0);async function N(){var e;if(!p)return;await pe();const{scrollContainer:s}=l;ye(s)?i.value=s:me(s)&&s!==""?i.value=(e=document.querySelector(s))!=null?e:void 0:m.value&&(i.value=ge(m.value)),i.value&&(b=P(i,"scroll",C),setTimeout(()=>O(),100))}function $(){p&&i.value&&C&&(b==null||b(),i.value=void 0)}function W(e){if(e.ctrlKey)return e.deltaY<0||e.deltaY>0?(e.preventDefault(),!1):void 0}function Z(){k.value&&(h=P("wheel",W,{passive:!1}),L=document.body.style.overflow,document.body.style.overflow="hidden",w.value=!0,v("show"))}function G(){h==null||h(),document.body.style.overflow=L,w.value=!1,v("close")}function Q(e){v("switch",e)}return ne(()=>l.src,()=>{I.value?(c.value=!0,f.value=!1,$(),N()):x()}),re(()=>{I.value?N():x()}),(e,s)=>(r(),d("div",M({ref_key:"container",ref:m},a(B),{class:[a(o).b(),e.$attrs.class]}),[f.value?z(e.$slots,"error",{key:0},()=>[A("div",{class:E(a(o).e("error"))},ce(a(T)("el.image.error")),3)]):(r(),d(F,{key:1},[g.value!==void 0?(r(),d("img",M({key:0},a(D),{src:g.value,loading:e.loading,style:a(Y),class:a(R),crossorigin:e.crossorigin,onClick:Z,onLoad:J,onError:U}),null,16,["src","loading","crossorigin"])):y("v-if",!0),c.value?(r(),d("div",{key:1,class:E(a(o).e("wrapper"))},[z(e.$slots,"placeholder",{},()=>[A("div",{class:E(a(o).e("placeholder"))},null,2)])],2)):y("v-if",!0)],64)),a(k)?(r(),d(F,{key:2},[w.value?(r(),ue(a(ve),{key:0,"z-index":e.zIndex,"initial-index":a(H),infinite:e.infinite,"zoom-rate":e.zoomRate,"min-scale":e.minScale,"max-scale":e.maxScale,"url-list":e.previewSrcList,crossorigin:e.crossorigin,"hide-on-click-modal":e.hideOnClickModal,teleported:e.previewTeleported,"close-on-press-escape":e.closeOnPressEscape,onClose:G,onSwitch:Q},{default:de(()=>[e.$slots.viewer?(r(),d("div",{key:0},[z(e.$slots,"viewer")])):y("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","url-list","crossorigin","hide-on-click-modal","teleported","close-on-press-escape"])):y("v-if",!0)],64)):y("v-if",!0)],16))}}),[["__file","image.vue"]]));export{ze as E};
