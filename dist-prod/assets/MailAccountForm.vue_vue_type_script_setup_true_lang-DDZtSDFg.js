import{d as x,h as F,z as S,r as u,o as b,q as g,w as r,f as i,u as l,x as y,y as A,k as C,I as R,M as j}from"./index-DPENBzsb.js";import{_ as q}from"./Dialog.vue_vue_type_style_index_0_lang-ncKgepny.js";import{_ as z}from"./Form-p7PKuXSG.js";import{g as E,c as I,a as U}from"./useCrudSchemas-CSAiO1lQ.js";import{r as B,a as D}from"./account.data-BdZZQtmS.js";const G=x({name:"SystemMailAccountForm",__name:"MailAccountForm",emits:["success"],setup(H,{expose:_,emit:w}){const{t:c}=F(),n=S(),e=u(!1),f=u(""),s=u(!1),d=u(""),o=u();_({open:async(t,a)=>{if(e.value=!0,f.value=c("action."+t),d.value=t,a){s.value=!0;try{const m=await E(a);o.value.setValues(m)}finally{s.value=!1}}}});const h=w,k=async()=>{if(o&&await o.value.getElFormRef().validate()){s.value=!0;try{const t=o.value.formModel;d.value==="create"?(await I(t),n.success(c("common.createSuccess"))):(await U(t),n.success(c("common.updateSuccess"))),e.value=!1,h("success")}finally{s.value=!1}}};return(t,a)=>{const m=z,v=R,M=q,V=j;return b(),g(M,{modelValue:l(e),"onUpdate:modelValue":a[1]||(a[1]=p=>C(e)?e.value=p:null),title:l(f)},{footer:r(()=>[i(v,{disabled:l(s),type:"primary",onClick:k},{default:r(()=>a[2]||(a[2]=[y("\u786E \u5B9A")])),_:1},8,["disabled"]),i(v,{onClick:a[0]||(a[0]=p=>e.value=!1)},{default:r(()=>a[3]||(a[3]=[y("\u53D6 \u6D88")])),_:1})]),default:r(()=>[A(i(m,{ref_key:"formRef",ref:o,rules:l(B),schema:l(D).formSchema},null,8,["rules","schema"]),[[V,l(s)]])]),_:1},8,["modelValue","title"])}}});export{G as _};
