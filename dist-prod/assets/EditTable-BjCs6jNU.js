import{d as E,r as u,n as T,y as z,u as a,o as J,q as M,w as t,f as e,k as P,x as p,h as S,z as U,a as j,P as B,l as F,m as G,I as W,C as A,J as D,M as H}from"./index-DPENBzsb.js";import{_ as K}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CnIlr_-B.js";import{u as L}from"./tagsView-uxrzGHKp.js";import{_ as N}from"./BasicInfoForm.vue_vue_type_script_setup_true_lang-1SpNVfaS.js";import{_ as O}from"./ColumInfoForm.vue_vue_type_script_setup_true_lang-CUhN04Fv.js";import{_ as Q}from"./GenerateInfoForm.vue_vue_type_script_setup_true_lang-fRJqDrEX.js";import{g as X,u as Y}from"./index-yz5bP6v6.js";import"./formRules-DGEyEWoW.js";import"./dict.type-UYIEcT9p.js";import"./el-tree-select-DxCa0FGQ.js";import"./tree-Cts6wVCK.js";import"./index-BVRKhr7s.js";const Z=E({name:"InfraCodegenEditTable",__name:"EditTable",setup($){const{t:_}=S(),b=U(),{push:y,currentRoute:g}=j(),{query:v}=B(),{delView:w}=L(),n=u(!1),r=u("colum"),f=u(),I=u(),i=u(),o=u({table:{},columns:[]}),k=async()=>{var s,l;if(a(o)){await((s=a(f))==null?void 0:s.validate()),await((l=a(i))==null?void 0:l.validate());try{await Y(o.value),b.success(_("common.updateSuccess")),c()}catch{}}},c=()=>{w(a(g)),y("/infra/codegen")};return T(()=>{(async()=>{const s=v.id;if(s){n.value=!0;try{o.value=await X(s)}finally{n.value=!1}}})()}),(s,l)=>{const m=F,V=G,d=W,h=A,C=D,R=K,x=H;return z((J(),M(R,null,{default:t(()=>[e(V,{modelValue:a(r),"onUpdate:modelValue":l[0]||(l[0]=q=>P(r)?r.value=q:null)},{default:t(()=>[e(m,{label:"\u57FA\u672C\u4FE1\u606F",name:"basicInfo"},{default:t(()=>[e(a(N),{ref_key:"basicInfoRef",ref:f,table:a(o).table},null,8,["table"])]),_:1}),e(m,{label:"\u5B57\u6BB5\u4FE1\u606F",name:"colum"},{default:t(()=>[e(a(O),{ref_key:"columInfoRef",ref:I,columns:a(o).columns},null,8,["columns"])]),_:1}),e(m,{label:"\u751F\u6210\u4FE1\u606F",name:"generateInfo"},{default:t(()=>[e(a(Q),{ref_key:"generateInfoRef",ref:i,table:a(o).table,columns:a(o).columns},null,8,["table","columns"])]),_:1})]),_:1},8,["modelValue"]),e(C,null,{default:t(()=>[e(h,{style:{float:"right"}},{default:t(()=>[e(d,{loading:a(n),type:"primary",onClick:k},{default:t(()=>l[1]||(l[1]=[p("\u4FDD\u5B58")])),_:1},8,["loading"]),e(d,{onClick:c},{default:t(()=>l[2]||(l[2]=[p("\u8FD4\u56DE")])),_:1})]),_:1})]),_:1})]),_:1})),[[x,a(n)]])}}});export{Z as default};
